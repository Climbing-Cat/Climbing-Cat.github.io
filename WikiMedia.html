<!--
https://softwareengineeringdaily.com/tag/indie-hackers/
http://stackoverflow.com/questions/7605930/how-to-set-start-time-offset-using-setcurrenttime
https://github.com/johndyer/mediaelement/blob/master/docs/api.md
https://designmodo.com/audio-player/
http://butlerccwebdev.net/support/html5-video/mediaelementjs-demo.html
http://folk.uib.no/jvi041/player/examples/_name=loop.html

Time-based events in MediaElements.js
https://github.com/johndyer/mediaelement/issues/707
http://stackoverflow.com/questions/36453069/how-to-add-pause-points-to-mediaelement-js-video-player

local files:
		<script src="js/jquery.js"></script>
		<script src="js/mediaelement-and-player.min.js"></script>
		<link href="css/mediaelementplayer.min.css" rel="stylesheet" />

		online files:
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/mediaelement/latest/mediaelement-and-player.min.js"></script>
		<link href="https://cdn.jsdelivr.net/mediaelement/latest/mediaelementplayer.css" rel="stylesheet" />

Sample URL's
____________
Training Beta (Uses libsyn)
https://traffic.libsyn.com/secure/force-cdn/highwinds/trainingbeta/Danny-Robertson.mp3
http://traffic.libsyn.com/forcedn/trainingbeta/Madaleine-Sorkin.mp3

The Enormocast (Uses blubrry, download link in page)
http://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo115PaulRobinson.mp3

Training For Climbing (Uses libsyn. Page has basic time-stamped notes)
http://trainingforclimbing.com/podcast-12-the-10-4-rule-for-effective-projecting-steady-improvement/
search for iframe, then search for:
		var mediaURLLibsyn = "http://traffic.libsyn.com/force-cdn/ec/trainingforclimbing/podcast_12_May2017_The_10-4_Rule_Projecting.mp3";
		var mediaURL = "http://traffic.libsyn.com/force-cdn/ec/trainingforclimbing/podcast_12_May2017_The_10-4_Rule_Projecting.mp3";

http://traffic.libsyn.com/force-cdn/ec/trainingforclimbing/podcast_12_May2017_The_10-4_Rule_Projecting.mp3

The Dirtbag Diaries (uses SoundCloud, not sure how to Extract yet!)
 - search for an iframe with text player
src url will be: http://w.soundcloud.com/player/?url=https%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F319939267&visual=true&auto_play=false&hide_related=true&show_comments=false&show_user=false&show_reposts=false
the url needs to be URL decoded to: https://api.soundcloud.com/tracks/319939267
then append: /download?client_id=a3e059563d7fd3372b49b37f00a00bcf
OR load the iframe src and search for "download_url":"https://api.soundcloud.com/tracks/319939267/download
then append the correct client_id for the site: ?client_id=a3e059563d7fd3372b49b37f00a00bcf

http://dirtbagdiaries.com/the-bet/
https://api.soundcloud.com/tracks/319939267/download?client_id=a3e059563d7fd3372b49b37f00a00bcf

http://dirtbagdiaries.com/shorts-catching-hope/
https://api.soundcloud.com/tracks/317557821/download?client_id=a3e059563d7fd3372b49b37f00a00bcf

Chalk Talk (CTClimbing Podcast, Uses libsyn, There's a small play button at the bottom of the page. Page contains basic notes)
http://ctclimbingpodcast.com/louieanderson/
http://hwcdn.libsyn.com/p/5/6/a/56a372124be74d07/Ep.7_-_Louie_Anderson.mp3?c_id=7568960&expiration=1493839434&hwt=99520384c73b5174a0512dad57c46be0

Try this! Download from SoundCloud:
http://lifehacker.com/5891635/download-any-mp3-from-soundcloud-with-this-bookmarklet

client_id query string parameter seems to be per site/customer)? - which is why it works for 2 different mp3 urls?

The Power Company Podcast (uses PodBean)
https://powercompanyclimbing.podbean.com/page/1/
search for: data-uri="http://powercompanyclimbing.podbean.com/mf/play/hihu7h/Episode_92_Health_Starts_in_the_Gut_with_Aicacia_Young.mp3" 
change to:           https://powercompanyclimbing.podbean.com/mf/download/hihu7h/Episode_92_Health_Starts_in_the_Gut_with_Aicacia_Young.mp3


The Ledge - A Climbing Life Podcast (uses SoundCloud)
www.theledge.se/podcasts

Jam Crack - The Niall Grimes Climbing Podcast (Uses libsyn)
www.niallgrimes.com/jam-crack-podcast/

The Bad Beta Podcast (Uses libsyn)
http://www.badbetapodcast.com

The Sharp End (uses SoundCloud, seems like a mountaineering podcast)
https://m.soundcloud.com/the_sharp_end

MtnMeister (uses SoundCloud, outdoors podcasts covering climbing, skiing, mountaineering, ultrarunning etc.)
https://player.fm/series/mtnmeister-48469
mtnmeister.com

Ideas for playlist
https://css-tricks.com/draggable-elements-push-others-way/

http://code.makery.ch/library/dart-drag-and-drop/

http://touchpunch.furf.com/

jQuery UI sortables drag to trash - JSFiddle
https://jsfiddle.net/Glutnix/pSgDu/

-->

<html>

	<head>
		<title>WiKiMedia Player</title>

		<link  href="https://refreshless.com/nouislider/distribute/nouislider.min.css?v=1440" rel="stylesheet"/>
		<link rel="stylesheet" href="css/nouislider.mod.css"/>

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		
		<link type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/blitzer/jquery-ui.min.css" rel="stylesheet" />
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

	
		<script src="https://refreshless.com/nouislider/distribute/nouislider.min.js?v=1440"></script>
   
		<link  href="https://cdn.jsdelivr.net/npm/round-slider@1.5.1/dist/roundslider.min.css" rel="stylesheet"/>
		<link  href="css/roundslider.mod.css" rel="stylesheet"/>

		<script src="https://cdn.jsdelivr.net/npm/round-slider@1.5.1/dist/roundslider.min.js"></script>
	
		<link  href="css/mediaelementplayer.min.css" rel="stylesheet" />	
		<script src="js/mediaelement-and-player.min.js"></script>
		<script src="js/mediaelement/renderers/vimeo.js"></script>
		
		<script type="text/javascript" src="https://unpkg.com/json-url@2.3.1/dist/browser/json-url.js"></script>

		<script src="js/controls1.js"></script>
		
		<style type="text/css">
			#add_theme_dialog label, #add_theme_dialog input { display:block; }
			#add_theme_dialog label { margin-top: 0.5em; }
			#add_theme_dialog input, #add_theme_dialog textarea { width: 95%; }
			#tabs { margin-top: 1em; width: 500px; }
			#tabs li .ui-icon-close { float: left; margin: 0.4em 0.2em 0 0; cursor: pointer; }
			#add_theme_tab { cursor: pointer; }

			.playlist { list-style-type: none; margin: 0; padding: 0;  }
			.playlist li { margin: 0 3px 3px 3px; padding: 4px; height: 18px; color: #FFF; background-color: #2F2F2F;}
			.playlist li.onTheFly div { margin: 0px; margin-left: 30px; padding: 0px;  color: #FFF; background-color: #046c94; text-align: center; display: inline-block; float: right; color: #39E884;}
			.playlist li.onTheFly.currentlyPlaying div { margin: 0px; margin-left: 30px; padding: 0px;  color: #FFF; background-color: #79daff; text-align: center; display: inline-block; float: right; color: #00ac4a;}


			.playlist li.onTheFly { margin: 0 3px 3px 3px; padding: 4px; height: 18px; color: #FFF; background-color: #046c94; }
			.playlist li span { position: absolute; margin-left: -1.3em; }
			
			.playlist li { cursor: move; }

			.playlist li.currentlyPlaying {background-color: #39E884;}
			.playlist li.onTheFly.currentlyPlaying {background-color: #79daff;}
			.dropArea { background-color: #faa; }
			.dropAreaHover { background-color: #f00; }
			
			#slider-handle {
				min-width: 1em;
				width: auto;
				height: 1.6em;
				top: 50%;
				margin-top: -.8em;
				text-align: center;
				line-height: 1.6em;
				font-size: 0.75em;
			}
			
			.disabledText {
			   color: darkgrey;
			}

	 </style>
	</head>

	<body>

		<div style="width: 100%; height: 30px;">
		<div style="text-align: center;">
			<div style="display: inline-block;">
				<h1>WiKiMedia Player</h1>
				<h5 style="text-align:right;"><i>by Climbing-Cat</i></h5>
			</div>
			</div>
			</br>
			<div id="SelectMediaType">
				Select Media Type (audio/video)
				<select name="p" id="MediaType">
				  <option value="0"></option>
				  <option value="1">audio</option>
				  <option value="2">video</option>
				</select>
			</div>

			<select name="PoCaMode" id="PoCaMode" class="editcontrols">
			  <option value="1">edit</option>
			  <option value="2">play</option>
			</select>
			</br>
			</br>

			<table id="SelectPodcast">
				<tr><td>Podcast Site</td><td>Episode</td></tr>
				<tr>
					<td>
						<select id="PodcastSite">
						  <option value="0"></option>
						  <option value="1">Enormocast</option>
						  <option value="2">PowerCompanyClimbing</option>
						  <option value="3">TBP</option>
						  <option value="4">TrainingForClimbing</option>
						</select>
					</td>
					<td>
						<select class="sitePodcasts" id="Site0Podcasts" value="0">
						  <option value=""></option>
						</select>

						<select class="sitePodcasts" id="Site1Podcasts" value="1" style="display: none">
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo1Final.mp3">Episode 1: Welcome to the Enormocast.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo2secretFinal.mp3">Episode 2: Take Your Secret and Shove it!</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo3Kelly1.mp3">Episode 3: Kelly Cordes is livin life disaster style.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo4splitter.mp3">Episode 4: BJ Sbarra (and Thunderpup) is here to inspire you.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo5Bish.mp3">Episode 5: Andrew Bisharat prepares to die.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo6Hayden1.mp3">Episode 6: Hayden Kennedy: Alpine Taliban or Patagonian Custodian (Part 1)</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo7Hayden2.mp3">Episode 7: Hayden Kennedy: Alpine Taliban or Patagonian Custodian (Part 2)</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo8StephDavis.mp3">Episode 8: Steph Davis needs a lawyer and some ginkgo biloba.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo9SamLightner.mp3">Episode 9: Sam Lightner fights for your right to party (climb).</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo10Kelly5point.mp3">Episode 10: On our movie date, Kelly Cordes explains the cowards guide to alpinism.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo11CraigDemartino.mp3">Episode 11: What has two arms, one leg, and climbs like a mofo Craig Demartino.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo12Gracyn.mp3">Episode 12: Girl, youll be a woman soon (remix).</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo13Cedar.mp3">Episode 13: Cedar Wright, witness to the sickness.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo14Partners.mp3">Episode 14: Partners- More than just a soft catch.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo15Kids.mp3">Episode 15: Those meddling kids, Steve Denny and Henry Nadell.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo16KateRutherford.mp3">Episode 16: Kate Rutherford– light, slow, and lucky.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo17Brendan.mp3">Episode 17: Brendan Leonard, living the American dirtbag dream.</option>
						  <option value="http://media.blubrry.com/enormocast/enormocast.com/wp-content/uploads/podcasts/Enormo18RandyLeavitt.mp3">Episode 18: Randy Leavitt– Slackers need not apply.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo19Jefe.mp3">Episode 19: Jeff Jackson– Journeyman, Mystic</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo20listenermail.mp3">Episode 20: Listener Mail Volume 1</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo21JamesLucas.mp3">Episode 21: James Lucas– His finger in all the pies.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo22hardclimbingandrew.mp3">Episode 22: Climb hard and walk tall with Andrew Bisharat.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo23Mason.mp3">Episode 23: Mason Earle– Master of his domain.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo24Britney.mp3">Episode 24: Brittany Griffith– Mary Anne with a vengeance.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo25travelwithJTandBG.mp3">Episode 25: On tour with JT and the BAG.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo26KevinLandolt.mp3">Episode 26: Kevin Landolt pushing back against the universe.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo27Mayan.mp3">Episode 27: Mayan Smith-Gobat  Mama dont take no mess.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo28Honnoldwmaxim.mp3">Episode 28: Alex Honnold– Calmer than you are.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo29CodyRoth.mp3">Episode 29: Cody Roth– Climbing Europhiliac.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo30MattSamet.mp3">Episode 30: Matt Samet– Climbing up from the depths of madness.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo31ABHK80.mp3">Episode 31: Hayden Kennedy + Andrew Bisharat + PBR = Frothy Climbing Spray.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo32PaigeClaassenwmaxim.mp3">Episode 32: Paige Claassen– Climbing isn’t everything.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo33JonathanSiegrist.mp3">Episode 33: Jonathan Siegrist– Born to be a bad (and by that, we mean good).</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo34LIVE.mp3">Episode 34: LIVE ENORMOCAST!</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo35JenOlson.mp3">Episode 35: Jen Olson– Lucky Number 7.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo36Bolting_1.mp3">Episode 36: Choss Wranglers BJ Sbarra and Mike Schneiter.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo37Safety_1.mp3">Episode 37: The Safety Dance with Duane Raleigh.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo38Odub.mp3">Episode 38: Kris Odub Hampton learns that falling is floating.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo39HenryBarber.mp3">Episode 39: Henry Barber, enough said.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo40Shephard.mp3">Episode 40: Doug Shepherd– Too smart to be stupid.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo41Paulpiana.mp3">Episode 41: Paul Piana, Rock Climbing Legend.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo42Mehall.mp3">Episode 42: Luke Mehall– Keeping the Dirtbag Faith</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo43AsaFirestone.mp3">Episode 43: Asa Firestone – Beyond Climbing.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo44JoshuaBrandon.mp3">Episode 44: Joshua Brandon alive and well in the mountains.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo45Mulkey.mp3">Episode 45: Aaron Mulkey– Cold, wet and loving it.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo46Listenermail2.mp3">Episode 46: Listener Mail Volume Two.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo47JamesLucas2.mp3">Episode 47: James Lucas– The Life of Pie.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo48HazelFindlay.mp3">Episode 48: Hazel Findlay – Being blonde, bold, and resolute!</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo495point.mp3">Episode 49: On Stage with Honnold and Kennedy.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo50Kalous.mp3">Episode 50: Chris Kalous– Dancing with myself.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo51LynnHillpart1.mp3">Episode 51: Lynn Hill– Ain’t no mountain high enough. Part 1.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo52LynnHill2.mp3">Episode 52: Lynn Hill– Ain’t no mountain high enough. Part 2.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo53Wharton.mp3">Episode 53: Josh Wharton– Too good to flail.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo54Ladiesnight.mp3">Episode 54: Lady’s Night at the Enormocast</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo55Bjornstad.mp3">Episode 55: Eric Bjornstad– OD (Original Dirtbag).</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo56Liveatbonfire.mp3">Episode 56: Live Enormocast from Bonfire Coffee.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo57VarietyPack.mp3">Episode 57: Enormocast Mega Pack.</option>
						  <option value="https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo58Shulte.mp3">Episode 58: Chris Schulte – Bouldering sensei.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo59Collins.mp3">Episode 59: Jeremy Collins – The Art of Climbing.</option>
						  <option value="http://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo60enormofest.mp3">Episode 60: Building a Better Climber w/ Topher Donahue and Chris Van Leuven.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo61verticalmind.mp3">Episode 61: Don McGrath and the Vertical Mind.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo62AngiePayne.mp3">Episode 62: Angie Payne– Type A for Angela.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo63DrVagy_1.mp3">Episode 63: Dr. Jared Vagy– The Climbing Doctor is in.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo64BillandDan.mp3">Episode 64: Bill Ramsey and Dan Mirsky – The Student Becomes the Master.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo65RussClune_1.mp3">Episode 65: Russ Clune– The Lifer.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo66AngelavanW.mp3">Epsiode 66: Angela Van Wiemeersch– The Ice Gypsy</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo67DawnGlanc.mp3">Episode 67: Dawn Glanc – The Icewoman Cometh.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo68BeccaSkinner.mp3">Episode 68: Becca Skinner– Living the Legacy.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo69Cragginclassicwv.mp3">Episode 69: Live Enormocast New River Gorge Craggin’ Classic.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo70ListenerMail3.mp3">Episode 70: Listener Mail Volume 3</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo71JessaGoebel.mp3">Episode 71: Jessa Goebel– Making it work.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo72CordesTheTower.mp3">Episode 72: Author Kelly Cordes– In Search of Justice.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo73FrankSanders.mp3">Episode 73: Frank Sanders– Man of the Tower.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo74BradyRobinson.mp3">Episode 74: Brady Robinson– The Accidental Advocate.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo75StevieHaston.mp3">Episode 75: Stevie Haston– Rad Reputation.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo76Pringle.mp3">Episode 76: Ethan Pringle– Don’t Call it a Comeback…</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo77KillianAnna.mp3">Episode 77: Anna Sthr and Kilian Fischhuber– The Iron Couple.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo78SonnieTrotter.mp3">Episode 78- Sonnie Trotter– Nicer Than You Are.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo79RRRLive.mp3">Episode 79- Fear, not loathing, in Las Vegas (Live).</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo80NinaCaprez.mp3">Episode 80: Nina Caprez– For the love of climbing.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo81PeterCroft.mp3">Episode 81: Peter Croft– Kid in a Candy Store.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo82JackTackle.mp3">Episode 82: Jack Tackle – True Grit.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo83LiveBonfire2015.mp3">Episode 83: #instafacetweetmygram with Hayden Kennedy, Brendan Leonard, and Andrew Bisharat.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo84DanielJung.mp3">Episode 84: Daniel Jung – The Climber’s Climber.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo85BarbaraZangerl.mp3">Episode 85: Barbara “Babsi” Zangerl – Leben und Lernen.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo86MikeySchaefer.mp3">Episode 86: Mikey Schaefer – The Force is Strong.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo87MadaleineSorkin.mp3">Episode 87: Madaleine Sorkin– Become What You Are.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo88ChrisMac_1.mp3">Episode 88: Chris McNamara– Living the Ever Changing Dream.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo89EmilyHarrington_3.mp3">Episode 89: Emily Harrington– On Top o’ the World.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo90PeterMetcalf_1.mp3">Episode 90: Peter Metcalf– Big Peaks and High Stakes.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo91MistyMurphy.mp3">Episode 91: Misty Murphy– Limestone Siren.</option>
						  <option value="http://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo92JamesLucas3.mp3">Episode 92: James Lucas – Free Riding.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo93ArmandoMenocal_1.mp3">Episode 93: Armando Menocal – The Peaceful Climbing Warrior.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo94ColinHaley.mp3">Episode 94: Colin Haley – The Contender.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormofinal95stefan.mp3">Episode 95: Stefan Glowacz – Still on Top.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo96SaidBelhaj.mp3">Episode 96: Said Belhaj – All In, All the Time.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo97JaySmith.mp3">Episode 97: Jay Smith – A Climber for All Seasons.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo98EricBarnard.mp3">Episode 98: Eric Barnard – Small Town, Big Dreams.</option>
						  <option value="http://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo99LibbySauter.mp3">Episode 99- Libby Sauter – Life on the Short Fix.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo100TommyCaldwell.mp3">Episode 100: Tommy Caldwell – Adventure Addict.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo101JustinWood_1.mp3">Episode 101: Justin Wood – Problem Solver.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo102RebeccaRusch_3.mp3">Episode 102: Rebecca Rusch – Once a Climber, Always a Climber.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo103StacyBare.mp3">Episode 103: Stacy Bare– All We Need is Love, Climbing.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo104InesPapert.mp3">Episode 104: Ines Papert – Walking the The Beautiful Line.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo105WillStanhope96.mp3">Episode 105: Will Stanhope – Real Men Don’t Cry (Mostly).</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo106LivefromBonfire2016.mp3">Episode 106: Live from Bonfire Coffee 2016 w/ Cedar Wright, Leici Hendrix, and Jen Altschul.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo107MikeLibecki.mp3">Episode 107: Mike Libecki – Passion for Adventure.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo108JoeKinder_1.mp3">Episode 108: Joe Kinder – Working for it.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo109ChelseaRude_1.mp3">Episode 109: Chelsea Rude – Can She Suffer Yes, She Can.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo110CheyneLempe.mp3">Episode 110: Cheyne Lempe – Finding His Way.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo111BradGobright.mp3">Episode 111: Brad Gobright – High Class Dirtbag.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo112PeeweeOuellet.mp3">Episode 112: Jean-Pierre “Peewee” Ouellet – The Collector.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo113RobPizem.mp3">Episode 113: Rob Pizem – The Time is Now.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo114KolinPowick.mp3">Episode 114: Kolin Powick uses SCIENCE to keep you ALIVE!</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo115PaulRobinson.mp3">Episode 115: Paul Robinson Loves to Fail.</option>
						  <option value="http://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo116DaveAllfrey.mp3">Episode 116: Dave Allfrey – Psyched and Solid.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo117HeatherWeidner.mp3">Episode 117: Heather Weidner – The Life of Try.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo118ConradAnker.mp3">Episode 118: Conrad Anker – You’ve Come Far, Pilgrim.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo119BretteHarrington.mp3">Episode 119: Brette Harrington – Go Your Own Way.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo120MiguelDario.mp3">Episode 120: Kris Hampton, Miguel and Dario Ventura – Life Imitates Art [REBROADCAST]</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo121Parker.mp3">Episode 121: Christopher Parker – Went Down To The Crossroads.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo122Florine.mp3">Episode 122: Hans Florine – A Need for Speed (Climbing).</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo123KittyCalhoun.mp3">Episode 123: Kitty Calhoun – The Mountains are Calling.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo124BooneSpeed.mp3">Episode 124: Boone Speed – Climbing Creative.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo125NinaWilliams.mp3">Episode 125: Nina Williams Comes Clean.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo126Noah_Kaufman.mp3">Episode 126: Noah Kaufman – Not Just a Ninja.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo127ErikWeihenmayer.mp3">Episode 127: Erik Weihenmayer – Learning by Letting Go.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo128DevilsLakeCC.mp3">Episode 128: Live from Devils Lake Craggin’ Classic</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo129SteveSwenson2.mp3">Episode 129: Steve Swenson – Almost an Astronaut.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo130JacopoLarcher_1.mp3">Episode 130- Jacopo Larcher – So Many Routes, So Many Dreams</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo131HansjorgAuer.mp3">Episode 131: Hansjrg Auer – Finding the Moment.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo1325Point4-17.mp3">Episode 132: Live from 5Point Film Festival- Climbing Films.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo133AlexHonnold2.mp3">Episode 133: Alex Honnold – Kind of a Big Deal.</option>
						  <option value="https://media.blubrry.com/enormocast/p/content.blubrry.com/enormocast/Enormo134GrahamZimmerman3.mp3">Episode 134: Graham Zimmerman – Both Sides of the Lens.</option>
						</select>
						<select class="sitePodcasts" id="Site2Podcasts" value="2" style="display: none">
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/hihu7h/Episode_92_Health_Starts_in_the_Gut_with_Aicacia_Young.mp3">Ep. 92: Health Starts in the Gut with Aicacia Young, RDN</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/auc3dt/Ep_91_Board_Meetings_Do_Gym_Grades_Matter.mp3">Ep. 91: Board Meetings | Do Climbing Gym Grades Matter?</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/53unm9/Ep_90_The_Coach_Climber_Dynamic_with_Taylor_Reed_and_Bella_Jariel_Mixdown_1.mp3">Ep. 90: The Coach/Climber Dynamic with Taylor Reed and Bella Jariel</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/aquduf/Episode_89_Become_a_Better_Climber_with_Peter_Bonamici.mp3">Ep. 89: Become a Better Climber with Peter Bonamici</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/3z3hju/Episode_88_Climb_Injury_Free_Pt_1_Mobility_with_Dr_Jared_Vagy.mp3">Ep. 88: Climb Injury Free Pt. 1 | Mobility with Dr. Jared Vagy</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/f89pr3/Episode_87_Board_Meetings_Principles_vs_Prescriptions.mp3">Ep. 87: Board Meetings | Principles vs. Prescriptions</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/a83gkg/Episode_86_Board_Meetings_Training_Where_You_Are_vs_Where_You_Want_To_Be.mp3">Ep. 86: Board Meetings | Training Where You Are vs. Where You Want To Be</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/ik8iyj/Episode_85_Board_Meetings_Generalization_vs_Specialization.mp3">Ep. 85: Board Meetings | Generalization vs. Specialization</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/rtgkug/Episode_84_Board_Meetings_Pyramids_vs_Towers.mp3">Ep. 84: Board Meetings | Pyramids vs. Towers</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/jc5ppb/Episode_83_Board_Meetings_Quality_vs_Quantity.mp3">Ep. 83: Board Meetings | Quality vs. Quantity</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/882774/Episode_82_Board_Meeting_3_Things_We_ve_Learned_from_Better_Climbers_with_guest_host_Edwin_Teran.mp3">Ep. 82: Board Meetings | 3 Things We&#8217;ve Learned From Better Climbers with Guest Host Edwin Teran</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/bsrin3/Episode_81_Learning_from_Better_Climbers_with_Edwin_Teran.mp3">Ep. 81: Learning from Better Climbers with Edwin Teran</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/bn2ejh/Ep_80_Assessments_with_Steve_Maisch.mp3">Ep. 80: Assessments with Steve Maisch</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/dqasgt/Ep_79_Board_Meeting_When_To_Say_Take.mp3">Ep 79: Board Meetings | When To Say Take</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/zh7vps/Ep_78_PSA_Dont_Believe_the_Hype.mp3">Ep 78: PSA | Don&#8217;t Believe The Hype</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/87vubg/Episode_77_Climbing_and_Parenting_with_Beth_Rodden.mp3">Ep 77: Climbing and Parenting with Beth Rodden</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/uw4tjd/Ep_76_Fueling_from_Skratch_with_Dr_Allen_Lim.mp3">Ep 76: Fueling from Skratch with Dr. Allen Lim</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/yazmr8/Ep_75_Self_Worth_and_China_Doll_with_Heather_Weidner.mp3">Ep 75 Self Worth and China Doll with Heather Weidner</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/tj2nfj/Episode_74_NonSighting_with_Justin_Salas.mp3">Episode 74: Nonsighting with Justin Salas</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/g3ig4u/Episode_73_The_Importance_of_Travel_with_Russ_Clune.mp3">Episode 73: The Importance of Travel with Russ Clune</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/w7pais/Episode_72_Does_Size_Matter_with_Marina_Inoue.mp3">Episode 72: Does Size Matter? with Marina Inoue</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/3ctnwz/Episode_71_Board_Meeting_Goal_Setting.mp3">Episode 71: Board Meetings | Goal Setting</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/32mm7q/Routesetting_with_Jonathan_Brandt.mp3">Episode 70: Routesetting with Jonathan Brandt</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/229n37/Episode_69_Raising_Them_Right_with_Constance_Lightner.mp3">Episode 69: Raising Them Right with Constance Lightner</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/62epvy/Episode_68_Board_Meetings_I_Wish_I_Knew_Now_What_I_Knew_Then.mp3">Episode 68: Board Meetings | I Wish I Knew Now What I Knew Then</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/xzv5ws/Episode_67_The_Work_Behind_The_Body_with_Kelsey_K_Sather.mp3">Episode 67: The Work Behind The Body with Kelsey K. Sather</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/bditvf/Episode_66_Now_What_with_Dan_John.mp3">Episode 66: Now What? with Dan John</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/kjgkvb/Episode_65_Board_Meeting_5_Minute_Fingers.mp3">Episode 65: Board Meetings | Five Minute Fingers</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/rrc4sv/Episode_64_Fixed_vs_Growth_Mindset_with_Trevor_Ragan.mp3">Episode 64: Fixed vs. Growth Mindset with Trevor Ragan</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/rwvjtu/Episode_63_Belief_and_Partnership_with_Tommy_Caldwell.mp3">Episode 63: Belief and Partnership with Tommy Caldwell</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/5g83pb/Episode_62_The_Gnarly_Line_with_Dr_Shannon_OGrady.mp3">Episode 62: The Gnarly Line with Dr. Shannon O&#8217;Grady</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/r8rsuv/Episode_61_Protein_with_Dr_Shannon_OGrady_of_Gnarly_Nutrition.mp3">Episode 61: Protein with Dr. Shannon O&#8217;Grady of Gnarly Nutrition</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/59yfh3/Episode_60_BCAAs_with_Dr_Shannon_OGrady_of_Gnarly_Nutrition.mp3">Episode 60: BCAAs with Dr. Shannon O&#8217;Grady of Gnarly Nutrition</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/yu65mv/Episode_59_Mental_Fitness_with_Alex_Honnold_and_The_Warriors_Way.mp3">Episode 59: Mental Fitness with Alex Honnold and The Warriors Way</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/ukzrkg/Episode_58_Comparing_Hangboard_Protocols_with_Steve_Maisch.mp3">Episode 58: Comparing Hangboard Protocols with Steve Maisch</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/7d2x5k/Episode_57_Flow_and_Mental_Mastery_with_Hazel_Findlay.mp3">Episode 57: Flow and Mental Mastery with Hazel Findlay</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/psqrb7/Episode_56_Understanding_Eating_Disorders_with_Savannah_Buik.mp3">Episode 56: Understanding Eating Disorders with Savannah Buik</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/s3x3nb/Episode_55_Mental_Toughness_with_Emily_Tilden.mp3">Episode 55: Mental Toughness with Emily Tilden</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/s47q7g/Feminism_in_Climbing_with_Shelma_Jun.mp3">Episode 54: Feminism in Climbing with Shelma Jun</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/ceaiab/Episode_53_Pride_or_Spray_with_Kerry_Scott.mp3">Episode 53: Pride or Spray? with Kerry Scott</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/cbiahc/Episode_52_Common_Climbing_Injuries_with_Allison_Stowers.mp3">Episode 52: Common Climbing Injuries with Allison Stowers</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/635sfs/Episode_51_Finger_Health_with_Dr_Lisa_Erickson.mp3">Episode 51: Finger Health with Dr. Lisa Erickson</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/yjsaj3/Episode_50_A_Coaching_Masterclass_with_Lantien_Chu.mp3">Episode 50: A Coaching Masterclass with Lantien Chu</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/bjj7vs/Episode_49_A_Better_Strip_of_Wood_with_Tension_Climbing.mp3">Episode 49: A Better Strip of Wood with Tension Climbing</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/pmk53e/Episode_48_World_Cup_Pressure_with_Angie_Payne_Part_3.mp3">Episode 48: World Cup Pressure Part 3 with Angie Payne</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/fux23t/Episode_47_World_Cup_Pressure_with_Angie_Payne_Part_2.mp3">Episode 47: World Cup Pressure Part 2 with Angie Payne</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/s83ycz/Episode_46_World_Cup_Pressure_with_Angie_Payne_Part_1.mp3">Episode 46: World Cup Pressure Part 1 with Angie Payne</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/p6ge7m/Episode_45_Aggressive_Creativity_with_Jason_Kehl_.mp3">Episode 45: Aggressive Creativity with Jason Kehl</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/j48h96/Episode_44_Board_Meetings_Top_2_Plateau_Breakers.mp3">Episode 44: Board Meetings | Top 2 Plateau Breakers</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/344fdj/Episode_43_Jonah_Durham_is_a_Not_So_Average_Joe.mp3">Episode 43: Jonah Durham is a Not So Average Joe</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/u3n5tt/Episode_42_Common_Sense_Nutrition_with_Neely_Quinn.mp3">Episode 42: Common Sense Nutrition with Neely Quinn</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/gza9u2/Episode_41_Board_Meetings_Can_Everyone_Climb_V10.mp3">Episode 41: Board Meetings | Can Everyone Climb V10?</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/rg93if/Episode_40_Logical_Progression_Pt_2_with_Steve_Bechtel.mp3">Episode 40: BONUS: Logical Progression Pt 2 with Steve Bechtel</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/hpa285/Episode_39_Logical_Progression_Pt_1_with_Steve_Bechtel.mp3">Episode 39: Logical Progression Pt. 1 with Steve Bechtel</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/ptvj3h/Episode_38_Board_Meeting_Top_3_Training_Trends_We_Disagree_With.mp3">Episode 38: Board Meetings | Top 3 Training Trends We Disagree With</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/2nqans/Episode_37_Follow_the_Stoke_with_Dan_Mirsky.mp3">Episode 37: Follow the Stoke with Dan Mirsky</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/7rvpnr/Episode_36_Proven_Plans_with_Blake_Cash.mp3">Episode 36: Proven Plans with Blake Cash</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/kskvn2/Episode_35_Tanner_Wilson_is_a_Not_So_Average_Joe.mp3">Episode 35: Tanner Wilson is a Not So Average Joe</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/7x794c/Episode_34_What_is_Success_with_Dave_Chancellor_and_Yusuf_Daneshyar.mp3">Episode 34: What is Success with Dave Chancellor and Yusuf Daneshyar (Live at Climb So iLL)</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/bdksnz/Episode_33_Board_Meeting_Top_2_Sources_of_Information.mp3">Episode 33: Board Meetings | Top 2 Sources of Information</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/4hx8s5/Episode_32_Ego_Partnership_and_Awareness_with_Justen_Sjong.mp3">Episode 32: Ego, Partnerships, and Awareness with Justen Sjong</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/7qzzis/Episode_31_Devils_Advocate_The_Moon_Board.mp3">Episode 31: Devils Advocate | The Moon Board (featuring Ben Moon)</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/ehx3x5/Episode_30_If_it_ain_t_broke_fix_it_anyway_with_Jonathan_Siegrist.mp3">Episode 30: If It Ain&#8217;t Broke, Fix It Anyway with Jonathan Siegrist</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/5a2pxw/Episode_29_Skin_Care_with_Rhino_Skin_Solutions.mp3">Episode 29: Skin Care with Rhino Skin Solutions</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/eqyqa4/Episode_28_Community_and_Fleeting_Youth_with_Cody_Roth.mp3">Episode 28: Community and Fleeting Youth with Cody Roth</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/n3cdyy/Why_Form_Matters_with_Paul_Corsaro.mp3">Episode 27: Why Form Matters with Paul Corsaro</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/7szm54/Meghan_Baker_is_a_Not_So_Average_Jane.mp3">Episode 26: Meghan Baker is a Not So Average Jane</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/inzkww/Episode_25_Using_Limitations_with_Craig_Demartino.mp3">Episode 25: Using Limitations with Craig DeMartino</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/eteg5c/Episode_24_Board_Meetings_Top_3_Redpoint_Tactics.mp3">Episode 24: Board Meetings | Top 3 Redpoint Tactics</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/fsvine/Episode_23_Life_Imitates_Art_with_Miguel_Ventura.mp3">Episode 23: Life Imitates Art with Miguel Ventura</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/nm2fvx/Episode_22_Integrated_Strength_Training_with_Steve_Bechtel.mp3">Episode 22: Integrated Strength Training with Steve Bechtel</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/n4kdxj/Episode_21_Board_Meetings_Top_3_Ways_to_Balance_Climbing_with_Life.mp3">Episode 21: Board Meetings | Top 3 Ways to Balance Climbing with Life</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/pf62jd/Episode_20_Common_Sense_Training_with_Stevie_Haston.mp3">Episode 20: Common Sense Training with Stevie Haston</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/ss3xm7/Board_Meetings_Top_3_Things_We_ve_Changed_Our_Minds_About.mp3">Episode 19: Board Meetings | Top 3 Things We&#8217;ve Changed Our Minds About</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/wh844r/Episode_18_V11_to_5_11_with_Carrie_Cooper.mp3">Episode 18: V11 to 5.11 with Carrie Cooper</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/592qg9/Episode_17_Process_vs_Goal_Motivation_with_Arno_Ilgner.mp3">Episode 17: Process vs. Goal Based Motivation with Arno Ilgner</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/3thuv8/Episode_16_Always_Siked_with_Dru_Mack.mp3">Episode 16: Always &#8220;Siked&#8221; with Dru Mack</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/fc9at8/Top_3_ways_We_ve_Invested_in_Ourselves.mp3">Episode 15: Board Meetings | Top 3 Ways We&#8217;ve Invested in Ourselves</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/8jrk7e/Being_a_Multisport_Athlete_with_Charlie_Manganiello.mp3">Episode 14: Being a Multisport Athlete with Charlie Manganiello</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/m5u4re/Episode_13_Board_Meeting_Top_3_Mistakes_We_See.mp3">Episode 13: Board Meetings | Top 3 Mistakes We See Being Made</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/9fgz2b/Episode_12_Position_Over_Everything_with_Will_Anglin_and_Rowland_Chen.mp3">Episode 12: P.O.E. with Will Anglin and Rowland Chen</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/khk9fw/Episode_11_Top_3_Things_We_ve_Done_to_Positively_Affect_Our_Climbing___Board_Meeting.mp3">Episode 11: Board Meetings | Top 3 Things We&#8217;ve Done to Positively Affect Our Climbing</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/8ytd3p/Episode_10_Energy_Systems_Training_with_Eric_Horst.mp3">Episode 10: Energy Systems Training with Eric Horst</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/a494sf/Episode_9_Long_Distance_Projecting_with_Jon_Cardwell.mp3">Episode 9: Long Distance Projecting with Jon Cardwell</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/z2kycv/Episode_8_Deadlifting_with_Steve_Bechtel_and_Charlie_Manganiello.mp3">Episode 8: Deadlifting with Steve Bechtel and Charlie Manganiello</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/h6we3b/Episode_7_Folding_It_Over_with_Carlo_Traversi.mp3">Episode 7: Folding it Over with Carlo Traversi</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/nv9yei/Episode_6_To_Run_or_Not_To_Run_with_Steve_Bechtel.mp3">Episode 6:  To Run or Not to Run with Steve Bechtel</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/6cbj7a/Episode_5_Overhauling_Your_Style_with_Alli_Rainey.mp3">Episode 5: Overhauling Your Style with Alli Rainey</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/w7aj9v/Episode_4_Kettlebells_for_Climbers_with_Paul_Corsaro.mp3">Episode 4: Kettlebells for Climbers with Paul Corsaro</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/pi6qfx/Episode3ComingBackStrongerwRannveigAamodt.mp3">Episode 3:  Coming Back Stronger with Rannveig Aamodt</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/6duyi9/Episode2ResistanceTrainingwithSteveBechtel.mp3">Episode 2: Resistance Training with Steve Bechtel</option>
						  <option value="https://powercompanyclimbing.podbean.com/mf/download/pm46vg/Episode1GoingBigwithCarloTraversi.mp3">Episode 1: Going Big with Carlo Traversi</option>
						</select>
						<select class="sitePodcasts" id="Site3Podcasts" value="3" style="display: none">
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/paige-flatanger-1.mp3">TBP 086 :: Paige Claassen: How A Technical Climber Trained for Roof Climbing in Flatanger, Norway</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/esther-smith-back-neck.mp3">TBP 085 :: Esther Smith &#8211; Neck and Back Injuries in Climbers</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Tyler-Nelson.mp3">TBP 084 :: Dr. Tyler Nelson on Injury Rehab and Blood Flow Restriction Training</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/maureen-beck.mp3">TBP 083 :: Maureen Beck Climbs 5.11+ with One Hand</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/lee-sheftel.mp3">TBP 082 :: Lee Sheftel on Climbing 5.13 into His 70&#8217;s</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Justin-Brown.mp3">TBP 081 :: Skin Care for Climbers with Justin Brown of Rhino Skin Solutions</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Steve-Bechtel-3.mp3">TBP 080 :: Steve Bechtel on How to Create Your Own Training Plan</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Daniel-Woods.mp3">TBP 079 :: Daniel Woods on Training, Comps, Life Stuff, and The Pressure to Send</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Natasha-Barnes.mp3">TBP 078 :: Natasha Barnes Tells Us The 4 Best Lifts for Climbers</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Shannon-OGrady.mp3">TBP 077 :: The Best Supplements for Climbers with Shannon O&#8217;Grady</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Esther-Fingers.mp3">TBP 076 :: Esther Smith on How to Heal Your Finger Injury</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Mercedes-Body-Awareness.mp3">New Mini Podcast Series with Mercedes Pollmeier: Using Body Awareness in Climbing and Beyond</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Madaleine-Sorkin.mp3">TBP 075 :: Madaleine Sorkin on Training for 5.13 Big Walls and Alpine</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Mercedes-Pollmeier-2.mp3">TBP 074 :: Climbing Training Success Stories with Mercedes Pollmeier</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Margarita-Martinez.mp3">TBP 073 :: Margarita Martinez on Climbing Her First 13d at Age 58</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Danny-Robertson.mp3">TBP 072 :: How Danny Robertson Broke A 10-Year Plateau</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Esther-Smith-Elbows.mp3">TBP 071 :: Physical Therapist Esther Smith on Elbow Pain</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Josh-Dreher.mp3">TBP 070 :: Josh Dreher on Losing Weight and Home Gym Training</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Jess_Simmons.mp3">TBP 069 :: Jess Simmons on the Benefits of Yoga for Climbers</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Alex-Stiger.mp3">TBP 068 :: Alex Stiger on How Coaching Kids Made Her Stronger</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Chris-Heilman.mp3">TBP 067 :: Sports Psychologist Chris Heilman on Breathing and Staying Calm</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Esther-Smith-Shoulders.mp3">TBP 066 :: Physical Therapist Esther Smith Talks About Shoulders</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Beth-Rodden.mp3">TBP 065 :: Beth Rodden on Big Walls and Being A Mom</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Dan-Mirsky-2.mp3">TBP 064 :: Dan Mirsky on BD Bootcamp Success and Becoming A Trainer</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Andersons-2.mp3">TBP 063 :: The Anderson Brothers&#8217; Evolving Training Philosophies and New Research</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Colette-McInerney.mp3">TBP 062 :: Colette McInerney&#8217;s BD Bootcamp Success</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Jonathan-Siegrist-2.mp3">TBP 061 :: Jonathan Siegrist&#8217;s Minimal Training Regime and Meticulous Skin Care</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Sam-Elias.mp3">TBP 060 :: Sam Elias on Taming His Emotions to Climb Harder</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Access-Fund.mp3">TBP 059 :: Access Fund on Going from Gym to Crag Responsibly</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Kris-Peters-Training-Options.mp3">Ask Kris 011 :: Online Training Vs In-Person Training</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Joe-Kinder.mp3">TBP 058 :: Joe Kinder on The BD Bootcamp, Route Development, and Being a Pro</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Kris-Peters-Limited-Time.mp3">Ask Kris 010 :: Training on a Time Budget</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Joshua_Rucci.mp3">TBP 057 :: Joshua Rucci Compares Training College Athletes to Climbers</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Kris-Peters-Home-Training.mp3">Ask Kris 009 :: Efficient Home Training for Climbing</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Tom-Hackett.mp3">TBP 056 :: Our Shoulder Surgeon (Dr. Tom Hackett) on Best Practices for Surgery and Alternative Treatments</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Kris-Peters-HRM-Lactic-Acid.mp3">Ask Kris 008 :: Heart Rate Monitors and Lactic Acid Thresholds</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Lynn-Hill.mp3">TBP 055 :: Lynn Hill (need I say more?)</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Kris-Peters-overtraining.mp3">Ask Kris 007 :: Are You Overtraining?</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Ryan-Vachon.mp3">TBP 054 :: Ryan Vachon on Mixed Climbing Training</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Kris-Peters-fitness.mp3">Ask Kris 006 :: Improving Overall Fitness for Climbing</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Aaron-Mulkey.mp3">TBP 053 :: Aaron Mulkey on Ice Climbing Training</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Kris-Peters-core-strength.mp3">Ask Kris 005 :: Improving Core Strength for Climbing</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Mathilde-Becerra.mp3">TBP 052 :: How Mathilde Becerra Is Top 10 in World for Lead Climbing</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Kris-Peters-shoulders.mp3">Ask Kris 004 :: Shoulder Care for Climbers</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Sean-McColl.mp3">TBP 051 :: Sean McColl Tells Us How He Trains</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Kris-Peters-bouldering-vs-routes.mp3">Ask Kris 003 :: Training for Bouldering vs Routes</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Teal-Dreher.mp3">TBP 050 :: V8 Boulderer Teal Dreher Compares Training Programs</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Kris-Peters-3-Lifts.mp3">Ask Kris 002 :: The 3 Best Lifts for Climbers</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Mercedes-Pollmeier.mp3">TBP 049 :: Trainer Mercedes Pollmeier on ARCing and Training for 5.12</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Kris-Peters-Fingers.mp3">Ask Kris :: Finger Training Mini Episode</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Neil-Gresham.mp3">TBP 048 :: Neil Gresham on Training for 5.11 and 5.12</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Jorg-Verhoeven.mp3">TBP 047 :: Jorg Verhoeven on The Nose, V15, and World Cup Training</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Neely-Weightloss.mp3">TBP 046 :: Neely Quinn on Weight Loss for Climbers</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Ethan-Pringle.mp3">TBP 045 :: Ethan Pringle on 15b, V15, and Depression</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Matt-Helliker.mp3">TBP 044 :: Matt Helliker Talks Training for Alpine Routes</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Ketogenic-Diet.mp3">TBP 043 :: Neely Explains The Ketogenic Diet</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/David-Mason.mp3">TBP 042 :: David Mason on Training for V13</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Matt-Lloyd.mp3">TBP 041 :: Matt Lloyd and His Climbing/CrossFit Hybrid Gym</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Nina-Williams.mp3">TBP 040 :: Nina Williams on Training for V13, Comps, and Diet</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Dave-MacLeod.mp3">TBP 039 :: Dave MacLeod on Training, Injuries, and Fear</option>
						  <option value="http://traffic.libsyn.com/forcedn/trainingbeta/Tom-Randall.mp3">TBP 038 :: Tom Randall on His Thorough and Scientific Training Methods</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Thomasina-Pidgeon.mp3">TBP 037 :: Thomasina Pidgeon on Climbing V12 at Age 40</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Steve-Bechtel-2.mp3">TBP 036 :: Steve Bechtel Interview #2</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Isabelle-Faus.mp3">TBP 035 :: Isabelle Faus on Sending V14</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Justen-Sjong.mp3">TBP 034 :: Justen Sjong on Improving Your Mental Game</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Will-Anglin.mp3">TBP 033 :: Will Anglin on Training Efficiently</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Nathan-Drolet.mp3">TBP 032 :: Nathan Drolet (Average Joe Climber) Trains Smart and Climbs Hard</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Ben-Moon.mp3">TBP 031 :: Ben Moon on Training and Climbing Through The Decades</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Jon-Cardwell.mp3">TBP 030 :: Jon Cardwell on How He Climbs Hard Routes and Boulders</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Adam-Macke.mp3">TBP 029 :: Climbing Trainer Adam Macke on MAT and Weight Training</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Neely-Quinn.mp3">TBP 028 :: Neely Quinn on Nutrition for Climbers</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Kevin-Jorgeson.mp3">TBP 027 :: Kevin Jorgeson Talks about The Dawn Wall and Highballs</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Lisa-Erikson.mp3">TBP 026 :: Dr. Lisa Erikson on Preventing and Healing Injuries</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Steve-Maisch.mp3">TBP 025 :: Steve Maisch on Home Wall Training and Lifting for Climbing</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Hazel-Findlay.mp3">TBP 024 :: Hazel Findlay on Being Brave and Staying Humble</option>
						  <option value="http://traffic.libsyn.com/force-cdn/ec/trainingbeta/Arno-Ilgner.mp3">TBP 023 :: Arno Ilgner on Overcoming Fear and Ego in Climbing</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Bill-Ramsey.mp3">TBP 022 :: Bill Ramsey on Sending 14b at Age 54</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Alex-Puccio.mp3">TBP 021:: Alex Puccio on Training, Bodyweight, and Crowdfunding</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Alex-Barrows.mp3">TBP 020 :: Alex Barrows on Training for His First 5.14d</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Eric-Horst.mp3">TBP 019 :: Eric HÃ¶rst on Training Methods for Adults and Kids</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Mike-Doyle.mp3">TBP 018 :: Mike Doyle on Training for Necessary Evil and Having A Career While Still Climbing Hard</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Adam-Ondra.mp3">TBP 017 :: Adam Ondra on All Things Training</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Steph-Davis.mp3">TBP 016 :: Steph Davis on Training for Alpine, Sport Climbing, Free Soloing, FFAs, and Veganism</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Heather-Weidner.mp3">TBP 015 :: Heather Weidner on Trying Hard and Sticking with Projects</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/JaredVagy.mp3">TBP 014 :: Physical Therapist Jared Vagy on Injury Prevention and Treatment</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Hans-Florine.mp3">TBP 013 :: Hans Florine on Speed Climbing The Nose and Training for It</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Alli_Rainey.mp3">TBP 012 :: Alli Rainey on Training, Cardio, and Body Weight</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Mirsky.mp3">TBP 011 :: Dan Mirsky on Staying Strong on the Road, Training for Rifle, and Whether Running Helps Him Send</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Kris_Peters.mp3">TBP 010 :: Kris Peters on All Things Training, Team of 2, TrainingBeta, and Cardio</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Andersons.mp3">TBP 009 :: Mark and Mike Anderson on Their Book, J-Star, and How Less Is More</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/AlexJohnson.mp3">TBP 008 :: Alex Johnson on Training, Hard Female Ascents, and The Swarm</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/SteveBechtel.mp3">TBP 007 :: Steve Bechtel on Training, Power Endurance, Running, Weight Loss, and More</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/KrisHampton.mp3">TBP 006 :: Kris &#8220;Odub&#8221; Hampton on Training, 14a, Rapping, and His TrainingBeta Program</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Jonathan.mp3">TBP 005: Jonathan Siegrist on Sending, Failing, Training, and Dreaming Big</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/AngiePayne.mp3">TBP 004: Angie Payne on V14, Failures, Rivals, Diet, Weight, and Training</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Jamie-final.mp3">TBP 003: Jamie Emerson on Climbing, Training, and Being The Sheriff</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/Paige-Final.mp3">TBP 002: Paige Claassen on Training, Eating, and Body Weight</option>
						</select>
						<select class="sitePodcasts" id="Site4Podcasts"  value="4" style="display: none">
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_36_jun2019_sinew3final.mp3">Podcast #36: Training to Increase Tendon Strength, Muscle Power, and Connective Tissue Health!</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_35_may2019_askcoachhorst-5.mp3">Podcast #35 – Ask Coach Hrst – Round 5</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_34_apr2019_physivantage.mp3">Podcast #34: A Revolution in Finger Training for Climbers</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_33_mar2019_sinew-training-final.mp3">Podcast #33: Intro to Training for Stronger Tendons and Ligaments</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_32_jan2019_5tipsfornewyear.mp3">Podcast #32: Success Strategies for Peak Performance!</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_31_dec2018_hangboard-final2.mp3">Podcast #31: Hangboard Training Guidelines, Pro Tips, and Research</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_30_nov2018_ircra.mp3">Podcast #30: Climbing Research Highlights & Training Tips</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_29_oct2018_askcoachhorst-4.mp3">Podcast #29: Ask Coach Hrst (Round 4)</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_28_aug2018_artofthescience-final.mp3">Podcast #28: Energy System Training (part 5) – The Art of the Science</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_27_july18_askcoachhorst-3.mp3">Podcast #27: Ask Coach Hrst (Round 3)</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_26_june2018_aerobic-system.mp3">Podcast #26: Energy System Training (part 4) –  Aerobic Power</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_25_june18_askcoachhorst-2.mp3">Podcast #25: Ask Coach Hrst (Round 2)</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_24_may18_lacticsystem_part2.mp3">Podcast #24: Energy System Training (part 3) – Anaerobic Capacity Training #2</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_23_may18_lacticsystem1f.mp3">Podcast #23: Energy System Training (part 2) – Anaerobic Lactic System #1</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_22_april18_askcoachhorst-1final.mp3">Podcast #22: Ask Coach Hrst – Hangboard Training, Big Wall Training, Multi-Sport Training, and more!</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_21_mar2018_energy-system-training-part1.mp3">Podcast #21: Energy System Training (Part 1) – Alactic Power Training</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_20_feb2018_horsttraining_autoregulation_running.mp3">Podcast #20: An Inside Look at Hrst Family Winter Training, Autoregulation, Running, and More!</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_19_dec2017_newyearsres.mp3">Podcast #19: Training, Productivity, & Performance Tips for 2018</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_18_nov2017_off-season-training-strategy.mp3">Podcast #18: Winter/Off-season Training Strategy</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_17_oct2017_managingfearoffalling.mp3">Podcast #17: Training to Control the Fear of Falling</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_16_sept2017_thefutureoftrainingforclimbing.mp3">Podcast #16: The Future of Training for Climbing!</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_15_aug2017_roadtripreflections_mythbusters-final2.mp3">Podcast #15: Roadtrip Performance Tips & 5 Training Myths BUSTED!</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_14_july2017_tips_for_weekendwarriors.mp3">Podcast #14: Performance Tips for Weekend Warriors</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_13_june2017_in-season-training-final2.mp3">Podcast #13 – Structuring Off-season and In-Season Training for Peak Performance</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_12_may2017_the_10-4_rule_projecting.mp3">Podcast #12: The “10-4 Rule” for Effective Projecting & Steady Improvement</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_11_apr2017_training_past_present_future.mp3">Podcast #11: Training for Climbing – The Past, The Present, The Future</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_10_mar2017_maxstrength_fingerboardtraining_2.mp3">Podcast #10: Maximum Strength Fingerboard Training</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_9_feb2017_whystrongfingersmatter.mp3">Podcast #9 – Five Reasons Why Strong Fingers Matter</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/podcast_8_jan2017_wintertraining.mp3">Podcast #8: Winter Gym Training Tips (to get Stronger!)</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/t4c-podcast-7-twofears.mp3">Podcast #7: Managing the Fears of Falling & Failure</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/t4c-podcast-6-8tipsc.mp3">Podcast #6: 8 Tips for Breaking through to the Next Grade</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/t4c-podcast-5-riskmanagement.mp3">Podcast #5: Risk Management for Outdoor Climbers</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/t4c-podcast-4-proprioception.mp3">Podcast #4: The Power of Proprioception</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingbeta/eric-horst.mp3">Podcast: Eric Hrst Interview with Training Beta</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/t4c-podcast-3-techniquetraining.mp3">Podcast #3: Accelerated Learning of Climbing Skills</option>
						  <option value="http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/t4c-podcast-2-x-factors.mp3">Podcast #2: Climbing Performance “X-Factors”</option>
						</select>
					</td>
					<td>
						<a href="#" id="setUrl0" style="display: none"> Load MP3 URL</a>
					</td>
				</tr>
			</table>

			
			<input id="urlInput" type="text" name="urlInput" value="" size="75">
			<a href="#" id="setUrl" > Load URL</a>

			
			<!-- a href="#" id="searchPodcasts" onclick=""> searchPodcasts</a -->

			<div id="audio-player-div" class="editcontrols"></div>
			<div id="video-player-div" class="editcontrols"></div>

			<div id="controls" style="display: none">
				<div id="nusDiv" class="editcontrols">
					<div id="noUiSlider"></div>
				</div>
				
				<div id="dial1box" class="box editcontrols" style="display: inline-block; position: relative; text-align: center;">
					<div id="dial1" class="dial"></div></br>
					<a href="#" id="setDial1">set Dial</a>
				</div>
				
				<div id="dial2box" class="box editcontrols" style="display: inline-block; position: relative; text-align: center;">
					<div id="dial2" class="dial"></div></br>
					<a href="#" id="lockDial2" style="display:none;">lock Dial</a>
					<a href="#" id="setDial2">set Dial</a>
				</div>
			</div>
			</br></br></br>
			
			<div id="delayDiv" style="display:none;">
				Pause: <input id="inputPoCaDelay" type="text" name="delay" value="0" class="editcontrols"> (s)
				</br>
			</div>


			<div id ="createButtonsDiv" class="editcontrols" style="display:none;">
				<button id="createPoCaMark" style="display:none;">Create Media Mark</button>
				<button id="createPoCaRange" style="display:none;">Create Media Snippet</button>
				<div id="multi-click" style="border-radius: 10px; background-color: #79daff; text-align: center; width: 175px" >
					<b>Create Media Snippet </br> On The Fly</b>
				</div>
			</div>

			</br>
			
			<div style="width: 600px; border-style: none;">
				Snippet Title:</br>
				<input id="inputPoCaTitle" type="text" style="width: 100%;" name="title" value="" class="editcontrols"></br>
				Snippet Note:</br>
				<textarea id="inputPoCaNotes" style="width: 100%; resize: none;" rows="6" class="editcontrols"></textarea></br>

			</div>

			</br>
			<hr>

			<div id="playlistContainer" style="display: none;" class="playlistDropArea">
				<table>
					<tr>
						<td>
							<div id="add_theme_dialog" title="Theme Name">
								<form>
									<fieldset class="ui-helper-reset">
										<input type="text" name="tab_title" id="tab_title" value="" maxlength="20" class="ui-widget-content ui-corner-all" />
									</fieldset>
								</form>
							</div>
							<button id="add_theme_tab">Add Theme</button>
							<div id="tabs">
								<ul>
									<li><a href="#tabs-1">Main</a></li>
								</ul>
								<div id="tabs-1" themeId="1">
									<ul id="playlist-1" style="max-height: 235px; overflow-y: auto;" class="playlist active-playlist playlistEditable">
										<!-- li class="ui-state-default">
											item 1
										</li>
										<li class="ui-state-default">
											item 2
										</li -->
									</ul>

								</div>
							</div>

							</br>
							<div id="slider" style="margin-left:2.4em; margin-right:2.4em;">
								<div id="slider-handle" class="ui-slider-handle"></div>
							</div>

						</td>
						<td width="175px" style="border-radius: 10px; background-color: #fee; padding:0; height: 100%; position:relative; text-align: center;">
							<div id="deleteArea" width="175px" style="display: block; position:absolute; top:0px; bottom:0px; left:0px; right:0px;">
							</div>
							<b>Drag here to delete.</b>
						</td>
					</tr>
				</table>

				</br>

				<hr>

			</div>

			<p><a id="expandAdvanced" href="#"><span>+</span>  Dev tools/options/info</a>
			<div id="contentAdvanced" style="display:none; width: 600px; border-style: none;">
				<input id="timeInput" type="text" name="time" value="400">
				<a href="#" class="bm3" >Go to time (in seconds)</a>
				</br>

				<input id="timeOutput" type="text" name="time" value=""> (s)
				<input id="timeOutput2" type="text" name="time" value=""> (hh:mm:ss)
				<a href="#" class="cbm" >Get current elapsed time (in seconds)</a>
				</br>
				</br>

				Snippet Data to Save:</br>
				<textarea id="inputPoCaDataToSave" style="width: 100%; resize: none;" rows="12" readonly></textarea>
			</div>

			<p><a id="expandFileOptions" href="#"><span>-</span> Import Export Media Snippets File</a>
			<div id="contentFileOptions" style="display: ;">
				<table>
					<tr id="loadOption">
						<td>Select a Media Snippets File to Load:</td>
						<td><input type="file" id="fileToLoad"></td>
						<td><button id="loadPoCaDataBtn">Import </button><td>
					</tr>
				</table>
				<div>
					</br>
					<button id = "savePoCaDataBtn">Export URL</button>
					</br>
					<div>
						<input type="checkbox" id="exportToFileCheckBox" />
						<label id="filenameToSaveAs" class="disabledText">Filename to Save As:<input id="inputFileNameToSaveAs" disabled/></label>
					</div>
					</br>
					<div id="exportedURL" style="display:none; width: 600px; border-style: none;">
						<!-- textarea id="exportPoCaDataToSaveBase64" style="width: 100%; resize: none;" rows="12" readonly></textarea -->

						<form id="tinyURLForm" action="https://tinyurl.com/create.php" method="post" >
							<table style="width: 600px;" align="center" cellpadding="5" bgcolor="#E7E7F7"><tr ><td >
							<b>Exported URL:  </b><br/>
							<input type="text" name="url" id="inputTinyURL" size="68"><input type="submit" name="submit" value="Create a tinyURL"/>
							</td></tr></table>
						</form>

					</div>
				</div>
			</div>

		</div>
		


		<script>

		//start of theme tabs panel functionality
		/*
			Theme (context) objects will be stored in theme map themeID->themeObject
			On page load, default theme (main) object will need to be created
			On PoCa file load, all current themes cleared and new ones created from data file
			Theme tabs and separate playlist divs created
			On PoCa file save, inputPoCaDataToSave textarea is first cleared and filled with; theme info followed by collated PoCaMarks (from all themes) - ordered by UI theme tabs
			inputPoCaDataToSave textarea can also be populated with common functionality from export func using a refresh button? - so, it's not done for every little text change!

			Theme object variables needed to maintain/switch context:
			themeId
			theme name
			currentplaylistID
			currentPoCaMarkIndex
			playlistMap
			PoCaMarks

			_____________________________
			
			when switching context (theme):
			1. stop playback
			2. ? global playlistItemSelected will need to be set to false AND run the logic associated with setting to false ?
			2. backup global variables to current context object
			3. copy next context variables to global scope
			
		*/
			var playlistID = 0; //global - across themes
			var playlistMap = new Map();
			var currentplaylistID = 0;


			var paused = true;


			$(document).ready(function() {

				//fixes same page links on github pages. Maybe base ref is not set correctly?
				//regardless, clicking a link now does nothing instead of going to the top of the page
				$('a[href="#"]').prop('href','javascript:void(0);');


				//also see: https://dtbaker.net/blog/submit-a-form-into-a-popup/
				$('#tinyURLForm').submit(function() {
					let newWindow = window.open('', 'formpopup', 'width=400,height=400,resizeable,scrollbars, status=no,location=no,toolbar=no, left=100, top=300');
					this.target = 'formpopup';
				});


//tabs
var tabTitle = $( "#tab_title" ),
tabTemplate = "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close' role='presentation'>Remove Tab</span></li>",
tabCounter = 2;
var maxTabs = 5;

$(".playlist").sortable({
    	tolerance: 'pointer',
        cursor: 'move',
        forcePlaceholderSize: true,
        dropOnEmpty: true,
        connectWith: 'ol.playlist',
      	placeholder: "ui-state-highlight"
}).disableSelection();

var tabs = $( "#tabs" ).tabs();

function doesThemeAlreadyExist()
{
	var themeExists = false;
	var newLabel = tabTitle.val();

	var anchors = tabs.find("a");
	$.each(anchors,function(idx, item){
		var currentLabel = $(item).html();
		if (currentLabel == newLabel)
		{
			console.log("Theme (" + newLabel + ") already exists");
			themeExists = true;
			return false;
		}
	});
	return themeExists;
}

// modal dialog init: custom buttons and a "close" callback resetting the form inside
var dialog = $( "#add_theme_dialog" ).dialog({
	autoOpen: false,
	modal: true,
	buttons: {
		Add: function() {
			if (!doesThemeAlreadyExist())
			{
				addTab();
				$( this ).dialog( "close" );
			}
		},
		Cancel: function() {
			$( this ).dialog( "close" );
		}
	},
	close: function() {
		form[ 0 ].reset();
	}
});


// addTab form: calls addTab function on submit and closes the dialog
var form = dialog.find( "form" ).submit(function( event ) {

	if (!doesThemeAlreadyExist())
	{
		addTab();
		dialog.dialog( "close" );
	}
	event.preventDefault();
});

function hideAddButtonThemeWhenMaxReached()
{
	if (themeMap.size >= maxTabs) //>= instead of ==, incase loading from file - which can be tampered with/or legacy file?
	{
		$( "#add_theme_tab" ).hide();
	}
}

function findNextFreeThemeId()
{
	if (themeMap.size >= maxTabs)
	{
		console.log("Max Themes reached! No free themeId available.");
		return null;
	}
	
	for(var nextThemeId = 1; nextThemeId <= maxTabs; ++nextThemeId)
	{
		if (!themeMap.has(nextThemeId.toString()))
		{
			console.log("nextFreeThemeId: "+ nextThemeId);
			return nextThemeId.toString();
		}
	}

	console.log("No free themeId available!");
	return null;
}

// actual addTab function: adds new tab using the input from the form above
function addTab() {
	var themeId = findNextFreeThemeId();
	var label = tabTitle.val() || "Tab " + themeId;
	
	//var theme = new PoCaTheme(themeId, label); //can't drectly create this otherwise unnecessary fields get outputted on export, don't know why yet!!!
	var src = '{"Id":"' + themeId + '","name":"' + label + '"}'
	var PoCaThemeTemp = JSON.parse(src);
	var theme = new PoCaTheme.FromObject(PoCaThemeTemp);
	
	addTheme(theme);
}

function addTheme(theme) {
	var themeId = theme.Id.toString();
	var label = theme.name;

	var id = "tabs-" + themeId;
	var li = $( tabTemplate.replace( /#\{href\}/g, "#" + id ).replace( /#\{label\}/g, label ) );

	tabs.find( ".ui-tabs-nav" ).append( li );
	tabs.append( "<div id='" + id + "' themeId='" + themeId + "'>" +
	"<ul id='playlist-" + themeId + "' style='max-height: " + playlistPxHeight + "px; overflow-y: auto;' class='playlist playlistEditable'></ul>" +
	"</div>" );
	
	tabs.tabs( "refresh" );


	$.each($( "#tabs li" ), function(idx, item){
		if ($(item).children().length == 1)
		{
			$(item).append("<span class='ui-icon ui-icon-close' role='presentation'>Remove Tab</span>");
		}
	});
	
	themeMap.set(themeId.toString(), theme);

/*
    $("#"+ id +" li", tabs).droppable(
droppableOptions
    );
	*/
	
	setPlaylistDroppable("#" + id);
	
	hideAddButtonThemeWhenMaxReached();
}

// addTab button: just opens the dialog
$( "#add_theme_tab" ).button().click(function() {
		dialog.dialog( "open" );
});

function removeTabAllowed()
{
	if ($( "#tabs .ui-tabs-anchor" ).length == 1)
	{
		return false;
	}
	
	return true;
}

function afterRemoveTab(themeId)
{
	if ($( "#tabs .ui-tabs-anchor" ).length == 1)
	{
		$( "#tabs .ui-tabs-anchor + span" ).remove();
	}
	
	tabs.tabs( "refresh" );
	
	themeMap.delete(themeId);
	console.log("removed theme (Id=" + themeId + ") from themeMap");

	if (themeMap.size < maxTabs)
	{
		$( "#add_theme_tab" ).show();
	}
}

function switchContextOnDeleteTab(themeId) //switch context to first theme that isn't the currently deleting theme
{
	var mapKeys = themeMap.keys();
	var nextThemeId = mapKeys.next().value;
	if (nextThemeId == themeId)
	{
		nextThemeId = mapKeys.next().value;
	}
	console.log("nextThemeId: "+ nextThemeId);

	var nextThemeAnchorId = $("#tabs [aria-controls='tabs-" + nextThemeId + "']").attr("aria-labelledby");
	
	$("#tabs [id='" + nextThemeAnchorId + "']").click();
}


// close icon: removing the tab on click
tabs.delegate( "span.ui-icon-close", "click", function() {

	if (!removeTabAllowed())
	{
		return;
	}

	var panelId = $( this ).closest( "li" ).remove().attr( "aria-controls" );
	$( "#" + panelId ).remove();

	var themeId = panelId.substr(5);
	if (themeId == currentThemeID) //closing a tab via x-icon - tab might be active/current (theme context might be current, so switch it if this is the case)
	{
		//switch context to first theme that isn't the currently deleting theme
		switchContextOnDeleteTab(themeId);
	}

	afterRemoveTab(themeId);
});

function deleteTab( event ) {

	if (!removeTabAllowed())
	{
		return;
	}

	var panel = tabs.find( ".ui-tabs-active" );

	var panelId = panel.attr( "aria-controls" );
	var themeId = panelId.substr(5);

	//switch context to first theme that isn't the currently deleting theme
	switchContextOnDeleteTab(themeId);
	
	panel.remove(); 
	$( "#" + panelId ).remove();

	afterRemoveTab(themeId);
};


function resetTabsOnLoad()
{
	tabs.tabs( "destroy" );    //restores to pre-init state
	$("#tabs ul li").remove(); //remove default html elements from on-page-load
	$("#tabs div").remove();   //remove default html elements from on-page-load
	tabs.tabs();               //init
	tabs.tabs("refresh");

	themeMap.clear();
}

tabs.find(".ui-tabs-nav").sortable({
	axis: "x",
	stop: function () {
		tabs.tabs("refresh");
	},
	create: function(event, ui) { 	 //http://thewebfosters.com/implementing-keyboard-control-jquery-draggable/
		jQuery(document).on('keydown', function(e, ui){
			if ( e.altKey && e.keyCode === $.ui.keyCode.BACKSPACE ) {
				deleteTab(e);
			}
		});
	}
});


//end of theme tabs panel functionality

//_______________________________________________________________________________________________________________
//_______________________________________________________________________________________________________________


		
				if (!Date.now) {
					Date.now = function() { return new Date().getTime(); }
				}


				function get_style_rule_value(selector, style)
				{
					var selector_compare=selector.toLowerCase();
					var selector_compare2= selector_compare.substr(0,1)==='.' ?  selector_compare.substr(1) : '.'+selector_compare;

					for (var i = 0; i < document.styleSheets.length; i++)
					{
						var mysheet = document.styleSheets[i];

						try
						{
							var myrules = mysheet.cssRules ? mysheet.cssRules : mysheet.rules;

							for (var j = 0; j < myrules.length; j++)
							{
								if (myrules[j].selectorText)
								{
									var check = myrules[j].selectorText.toLowerCase();
									switch (check)
									{
										case selector_compare  :
										case selector_compare2 : return myrules[j].style[style];
									}
								}
							}
						} //try
						catch(err)
						{}
					} //for
				} //func
	 
				function get_style_rule_Int_value(selector, style)
				{
					var temp = get_style_rule_value(selector, style);
					
					return parseInt(temp, 10);
				}

				//set playlist height
				var paddingTop = get_style_rule_Int_value('.playlist li', 'padding-top');
				var paddingBottom = get_style_rule_Int_value('.playlist li', 'padding-bottom');
				var height = get_style_rule_Int_value('.playlist li', 'height');
				var marginTop = get_style_rule_Int_value('.playlist li', 'margin-top');
				var marginBottom = get_style_rule_Int_value('.playlist li', 'margin-bottom');
				var playlistItemPxHeight = marginTop + paddingTop + height + paddingBottom + marginBottom;
				var playlistItemsToDisplay = 5;
				var playlistPxHeight = playlistItemPxHeight * playlistItemsToDisplay;
				/*
				console.log("paddingTop: " + paddingTop);
				console.log("paddingBottom: " + paddingBottom);
				console.log("height: " + height);
				console.log("marginTop: " + marginTop);
				console.log("marginBottom: " + marginBottom);
				*/
				//console.log("playlistItemPxHeight: " + playlistItemPxHeight);
				//console.log("playlistItemsToDisplay: " + playlistItemsToDisplay);
				//console.log("playlistPxHeight:" + playlistPxHeight);

				playlistPxHeight -= marginBottom;
 				$(".playlist").attr('style', "max-height: " + playlistPxHeight + "px; overflow-y: auto;");

				/*

				var lastScroll = 0;
				var count = 1;
				
				var lastScrollTime = Date.now();

				$('.active-playlist').scroll(function(){
				
					var curScrollTime = Date.now();
					
					if (curScrollTime < lastScrollTime + 1000)
					{
						console.log("tooearly");
						return;
					}
					lastScrollTime = curScrollTime;
					
					
					var el = $(this);
					var scroll = el.scrollTop();
				console.log("scroll: " + scroll);
				console.log("lastScroll: " + lastScroll);
var scrollableHeight = (PoCaMarks.length * playlistItemPxHeight) - playlistPxHeight;
				//console.log("scrollableHeight: " + scrollableHeight);
				//console.log("percentage: " + (scroll / scrollableHeight) * 100);


				//console.log("lastScroll: " + lastScroll);
					var round;
					
					if (lastScroll < scroll)
					{
						round = Math.ceil;
						count ++;
					}
					else
					{
						count --;
						round = Math.floor;
					}

				//console.log("round: " + round + " = " + round(scroll/16));
					lastScroll = round(scroll/16) * 16;
					//el.scrollTop(lastScroll);
					
				//console.log("");
					var container = $(this);
					var nthChildStr = ":nth-child(" + count + ")";
					var scrollTo = $('.active-playlist li' + nthChildStr);

					lastScroll = scrollTo.offset().top - container.offset().top + container.scrollTop();
					container.animate({
					    scrollTop: lastScroll
					});

					count++;
					console.log(count);

				});
*/

				$("#playlistContainer").show();


/*
				//set input field to default mp3 shown in combobox
				//then load the player with that mp3
				var selectedSite = $("#PodcastSite").find('option:selected').index();
				var mp3Url = document.getElementById("Site" + selectedSite + "Podcasts").value
				$("#urlInput")[0].value = mp3Url;
*/
				function createAudioPlayer()
				{
					var mp3Url = "";
					$("#audio-player-div").empty();
					document.getElementById('audio-player-div').innerHTML = '';
					document.getElementById('video-player-div').innerHTML = '';
					//<audio name="audio-player" id="audio-player" src="" type="audio/mp3" controls="controls"></audio>
					document.getElementById('audio-player-div').innerHTML += '<audio id="player" name="audio-player" src="' + mp3Url + '" type="audio/mp3" controls="controls"></audio>';
				}

				function createVideoPlayer()
				{
					//https://www.youtube.com/watch?v=iX1_BHfeMt0
					//https://www.youtube.com/watch?v=FRC6RImujHw
					//var youtubeUrl = "https://www.youtube.com/watch?v=FRC6RImujHw";
					var youtubeUrl = "";
					$("#video-player-div").empty();
					document.getElementById('audio-player-div').innerHTML = '';
					document.getElementById('video-player-div').innerHTML = '';
					document.getElementById('video-player-div').innerHTML += '<video id="player" name="video-player" width="640" height="360" preload="none" src="' + youtubeUrl + '"  controls playsinline webkit-playsinline></video>';
				}


				var pausedOnStopPoint = false;

				function convertToSeconds(input) {
					var parts = input.split(':'),
						hours = +parts[0],
						minutes = +parts[1],
						seconds = +parts[2];
					return +( (hours * 3600) + (minutes * 60) + seconds).toFixed(2);
				}

				function convertFromSeconds(totalSeconds) {
					hours = Math.floor(totalSeconds / 3600);
					totalSeconds %= 3600;
					minutes = Math.floor(totalSeconds / 60);
					seconds = Math.floor(totalSeconds % 60);
					
					return ('0'+hours).slice(-2) + ":" + ('0'+minutes).slice(-2) + ":" + ('0'+seconds).slice(-2);
				}

//____________________________________________________________________________________________________
//____________________________________________________________________________________________________

				function consoleLog(str, numTabs = 0) {
					var tempStr = "";
					
					for (var j=0; j < numTabs; ++j) {
						tempStr += "\t";
					}
					
					tempStr += str;
					console.log(tempStr);
				}

//____________________________________________________________________________________________________
//____________________________________________________________________________________________________

				function PoCaMark(themeId, type, url, start, stop, delay, title, notes) {
					this.themeId = themeId;
					this.type = type;
					this.url = url;
					this.start = start;
					this.stop = stop;
					this.delay = delay;
					this.title = title;
					this.notes = notes;
				}
				PoCaMark.prototype.PrintToLog = function() {
					consoleLog("themeId: " + this.themeId, 1);
					consoleLog("type: " + this.type, 1);
					consoleLog("url: " + this.url, 1);
					consoleLog("start: " + this.start, 1);
					consoleLog("stop: " + this.stop, 1);
					consoleLog("delay: " + this.delay, 1);
					consoleLog("title: " + this.title, 1);
					consoleLog("notes: " + this.notes, 1);
					consoleLog("");
				};
				PoCaMark.FromJson = function(json) { //static func, doesn't need object, just class
					var pTemp = JSON.parse(json);
					var p = Object.create(PoCaMark.prototype);
					// copy stuff over
					for (a in pTemp) {
					  p[a] = pTemp[a];
					}
					return p;
				};
				PoCaMark.FromObject = function(pm) {
					var p = Object.create(PoCaMark.prototype);
					// copy stuff over
					for (a in pm) {
					  p[a] = pm[a];
					}
					//p["themeId"] = pm["themeId"];
					//p["type"] = pm["type"];
					//p["url"] = pm["url"];
					//p["start"] = pm["start"];
					//p["stop"] = pm["stop"];
					//p["delay"] = pm["delay"];
					//p["title"] = "";
					//p["notes"] = pm["notes"];
					return p;
				};

				var PoCaMarks = [];
				PoCaMarks.FromJson = function(json) {
					var PoCaMarksTemp = JSON.parse(json);
					var PoCaMarksTemp2 = [];
					for (i=0; i < PoCaMarksTemp.length; ++i)
					{
						var p = new PoCaMark.FromObject(PoCaMarksTemp[i]);
						PoCaMarksTemp2.push(p);
					}
					return PoCaMarksTemp2;
				};
				
				var currentPoCaMarkIndex = 0;
				var currentPoCaMode = 0; //0=edit, 1=play
				var pausedAtTime = new Date();
				var playlistItemSelected = false;
				var newInputTimeA = "";
				var newInputTimeB = "";
				var newInputPoCaDelay = "0";
				var showingPoCaRangeButton = false;
				var newInputPoCaTitle = "";
				var newInputPoCaNotes = "";

//____________________________________________________________________________________________________
//____________________________________________________________________________________________________


				var themeMap = new Map();
				var currentThemeID = "1";

			
				function PoCaTheme(Id, name) {
					this.Id = Id;
					this.name = name;
					this.currentplaylistID = 0;
					this.currentPoCaMarkIndex = 0;
					this.playlistItemSelected = false;
					this.showingPoCaRangeButton = false;
					this.playlistMap = new Map();
					this.PoCaMarks = new Array();
					/*
					this.toJSON = function()
					{
						console.log("PoCaTheme.toJSON");
						return "cat";
					}
					*/
				}
				PoCaTheme.prototype.PrintToLog = function() {
					consoleLog("themeId: " + this.Id, 1);
					consoleLog("name: " + this.name, 1);
					consoleLog("currentplaylistID: " + this.currentplaylistID, 1);
					consoleLog("currentPoCaMarkIndex: " + this.currentPoCaMarkIndex, 1);
					consoleLog("playlistItemSelected: " + this.playlistItemSelected, 1);
					consoleLog("showingPoCaRangeButton: " + this.showingPoCaRangeButton, 1);
					consoleLog("playlistMap: " + this.playlistMap, 1);
					consoleLog("PoCaMarks: " + this.PoCaMarks, 1);
					consoleLog("");
				};
				PoCaTheme.FromJson = function(json) { //static func, doesn't need object, just class
					var pTemp = JSON.parse(json);
					var p = Object.create(PoCaTheme.prototype);
					// copy stuff over
					for (a in pTemp) {
					  p[a] = pTemp[a];
					}
					return p;
				};
				PoCaTheme.FromObject = function(pm) {
					var p = Object.create(PoCaTheme.prototype);
					// copy stuff over
					for (a in pm) {
					  p[a] = pm[a];
					}
					//p["Id"] = pm["Id"];
					//p["name"] = pm["name"];
					//p["currentplaylistID"] = pm["currentplaylistID"];
					//p["currentPoCaMarkIndex"] = pm["currentPoCaMarkIndex"];
					//p["playlistItemSelected"] = pm["playlistItemSelected"];
					//p["showingPoCaRangeButton"] = pm["showingPoCaRangeButton"];
					//p["playlistMap"] = pm["playlistMap"];
					//p["PoCaMarks"] = "";
					p["currentplaylistID"] = 0;
					p["currentPoCaMarkIndex"] = 0;
					p["playlistItemSelected"] = false;
					p["showingPoCaRangeButton"] = false;
					p["playlistMap"] = new Map();
					p["PoCaMarks"] = new Array();
					p["toJSON"] = function()
					{
						var obj = {};
						
						obj["Id"] = this["Id"];
						obj["name"] = this["name"];
						return obj;
					}
					return p;
				};

				var PoCaThemes = [];
				PoCaThemes.FromJson = function(json) {
					var PoCaThemesTemp = JSON.parse(json);
					var PoCaThemesTemp2 = [];
					for (i=0; i < PoCaThemesTemp.length; ++i)
					{
						var p = new PoCaTheme.FromObject(PoCaThemesTemp[i]);
						PoCaThemesTemp2.push(p);
					}
					return PoCaThemesTemp2;
				};
//____________________________________________________________________________________________________
//____________________________________________________________________________________________________

				function PoCaData(PoCaThemes, PoCaMarks) {
					this.PoCaThemes = PoCaThemes;
					this.PoCaMarks = PoCaMarks;
				}
				PoCaData.prototype.PrintToLog = function() {
					consoleLog("PoCaThemes: " + this.PoCaThemes, 1);
					consoleLog("PoCaMarks: " + this.PoCaMarks, 1);
					consoleLog("");
				};
				/*
				PoCaData.FromObject = function(pm) {
					var p = Object.create(PoCaData.prototype);
					// copy stuff over
					for (a in pm) {
					  p[a] = pm[a];
					}

					return p;
				};
				*/
				var PoCaDataObj = null;
				PoCaData.FromJson = function(json) {
					var PoCaDataTemp = JSON.parse(json);
					var PoCaDataTemp2 = null;

					var PoCaThemesTemp = [];
					for (i=0; i < PoCaDataTemp.PoCaThemes.length; ++i)
					{
						var p = new PoCaTheme.FromObject(PoCaDataTemp.PoCaThemes[i]);
						PoCaThemesTemp.push(p);
					}

					var PoCaMarksTemp = [];
					for (i=0; i < PoCaDataTemp.PoCaMarks.length; ++i)
					{
						var p = new PoCaMark.FromObject(PoCaDataTemp.PoCaMarks[i]);
						PoCaMarksTemp.push(p);
					}

					PoCaDataTemp2 = new PoCaData(PoCaThemesTemp, PoCaMarksTemp);
					return PoCaDataTemp2;
				};
//____________________________________________________________________________________________________
//____________________________________________________________________________________________________

				function initMainTabOnPageLoad()
				{
					resetTabsOnLoad();

					themeId = 1;

					//var theme = new PoCaTheme(themeId, "Main"); //can't drectly create this otherwise unnecessary fields get outputted on export, don't know why yet!!!
					var src = '{"Id":"1","name":"Main"}'
					var PoCaThemeTemp = JSON.parse(src);
					var theme = new PoCaTheme.FromObject(PoCaThemeTemp);

					addTheme(theme);

					//set first theme tab and it's playlist to active
					playlistItemSelected = false;
					showingPoCaRangeButton = false;
					currentThemeID = "onload";
					switchContextOnDeleteTab("onload"); //must create and initialise media player before calling this!
				}


				function scrollActivePlaylistToItem(nthChildStr)
				{
					console.log("adding class, nstr="+nthChildStr);

					var scrollTo = $('.active-playlist li' + nthChildStr);
					var container = scrollTo.parent();
					container.animate({
						scrollTop: scrollTo.offset().top - container.offset().top + container.scrollTop()
					});
				}
//____________________________________________________________________________________________________
//____________________________________________________________________________________________________

				function InitBehaviourA() {
					this.name = "BehaviourA";
				}
				InitBehaviourA.prototype.CreatePoCaMark = function(media) {
					//alert(this.name + "- CreatePoCaMark");
				};
				InitBehaviourA.prototype.CreatePoCaRange = function(media, onTheFly) {
					//alert(this.name + "- CreatePoCaRange");
				};
				InitBehaviourA.prototype.setA = function(timeAInSeconds) {
					var timeAHHMMSS = convertFromSeconds(timeAInSeconds);
					newInputTimeA = timeAHHMMSS;
				};
				InitBehaviourA.prototype.setB = function(timeBInSeconds) {
					var timeBHHMMSS = convertFromSeconds(timeBInSeconds);
					newInputTimeB = timeBHHMMSS;
				};

//____________________________________________________________________________________________________
//____________________________________________________________________________________________________

				function InitBehaviourB() {
					this.name = "BehaviourB";
				}
				InitBehaviourB.prototype.CreatePoCaMark = function(media) {
					//alert(this.name + "- CreatePoCaMark");
					console.log(this.name + "- CreatePoCaMark");
				};
				InitBehaviourB.prototype.CreatePoCaRange = function(media, onTheFly) {
					//alert(this.name + "- CreatePoCaRange");
					console.log(this.name + "- CreatePoCaRange");

					var themeId = currentThemeID;
					var url = $("#urlInput")[0].value;

					var timeRange = controls.createSnippet();
					var timeAInSeconds = timeRange[0];  //convertToSeconds($("#timeA")[0].value);
					var timeBInSeconds = timeRange[1];  //convertToSeconds($("#timeB")[0].value);
					var delayInSeconds = document.getElementById("inputPoCaDelay").value;
					
					var pocaTitle = document.getElementById("inputPoCaTitle").value;
					var pocaNotes = document.getElementById("inputPoCaNotes").value;
					
					var typeName = onTheFly ? "PoCaRangeOTF" : "PoCaRange";
					var p = new PoCaMark(themeId, typeName, url, timeAInSeconds, timeBInSeconds, delayInSeconds, pocaTitle, pocaNotes);
					//p.PrintToLog();
					PoCaMarks.push(p);

//var poCaMarksComboBox = $("#PoCaMarksComboBox");
//poCaMarksComboBox.append($("<option />").val(PoCaMarks.length)
//															.html(PoCaMarks.length));
					
					var playlist = $(".active-playlist");
					playlistID++;
					playlistMap.set(playlistID.toString(), p);
					
					var newLi = $("<li class='" + (onTheFly ? "onTheFly" : "") + "' />").val(playlistID)
												.attr('itemId', PoCaMarks.length -1)
												.html(convertFromSeconds(timeAInSeconds) + " - " + convertFromSeconds(timeBInSeconds));
//												.html($("#timeA")[0].value + " - " + $("#timeB")[0].value);

					if (onTheFly)
					{
						newLi.append($("<div class='PoCaRangeOTF' />")
										.html(("Finalize"))
									);
					}
					playlist.append(newLi);
		//										.html(timeAInSeconds + " - " + timeBInSeconds));
		//										.html(PoCaMarks.length));
					
					var nthChildIndex = PoCaMarks.length;
					var nthChildStr = ":nth-child(" + nthChildIndex + ")";
					scrollActivePlaylistToItem(nthChildStr);

					$("#playlistContainer").show();

					//console.log(p);
					//console.log(PoCaMarks[0]);

					//var json = JSON.stringify(p);
					//console.log(json);

					//var p2 = PoCaMark.FromJson(json);
					//p2.PrintToLog();
					
					var json2 = JSON.stringify(PoCaMarks);
					document.getElementById("inputPoCaDataToSave").value = json2;


					
					p.PrintToLog();

					newInputTimeA = newInputTimeB = convertFromSeconds(controls.getTimeB());
//					newInputTimeA = newInputTimeB;
//					$("#timeA").val(newInputTimeB);
					
					var blankTime = "";
//					newInputTimeB = blankTime;

//					$("#timeB").val(blankTime);
//					$("#createPoCaRange").hide();
//					showingPoCaRangeButton = false;
					
					document.getElementById("inputPoCaDelay").value = newInputPoCaDelay = "0";
					document.getElementById("inputPoCaTitle").value = newInputPoCaTitle = "";
					document.getElementById("inputPoCaNotes").value = newInputPoCaNotes = "";
				};
				InitBehaviourB.prototype.setA = function(timeAInSeconds) {
					alert("called legacy func: InitBehaviourB.prototype.setA");
					var timeAHHMMSS = convertFromSeconds(timeAInSeconds);
					newInputTimeA = timeAHHMMSS;
				};
				InitBehaviourB.prototype.setB = function(timeBInSeconds) {
					alert("called legacy func: InitBehaviourB.prototype.setB");
					var timeBHHMMSS = convertFromSeconds(timeBInSeconds);
					newInputTimeB = timeBHHMMSS;
				};

//____________________________________________________________________________________________________
//____________________________________________________________________________________________________

				function InitBehaviour(mode) {
					this.name = "Behaviour";
					this.behaviour = (mode==0) ? new InitBehaviourA() : new InitBehaviourB();
				}
				InitBehaviour.prototype.CreatePoCaMark = function(media) {
					this.behaviour.CreatePoCaMark(media);
				};
				InitBehaviour.prototype.CreatePoCaRange = function(media, onTheFly) {
					this.behaviour.CreatePoCaRange(media, onTheFly);
				};
				InitBehaviour.prototype.setA = function(timeAInSeconds) {
					//alert(this.name + "- setA");
					this.behaviour.setA(timeAInSeconds);
				};
				InitBehaviour.prototype.setB = function(timeBInSeconds) {
					//alert(this.name + "- setB");
					this.behaviour.setB(timeBInSeconds);
				};

				var behaviour = new InitBehaviour(1);

//____________________________________________________________________________________________________
//____________________________________________________________________________________________________

				function stringStartsWith(source, search)
				{
					return source.lastIndexOf(search, 0) === 0;
				}

				function searchPodcastURLs(url)
				{
					var arr = null; 
					
					if (stringStartsWith(url, "file") || !stringStartsWith(url, "http"))
					{
						console.log("searchPodcastURLs prematurely ended");
						return arr;
					}

					var podcastSites = $("#PodcastSite option");
					var numSites = podcastSites.length;
					
					//console.log("Num podcast sites: "+ numSites);
			
					for (var i=0; i< numSites; ++i)
					{
						var podcastsComboBoxId = "#Site" + i + "Podcasts";
						var podcastList = $(podcastsComboBoxId + " option");

						$.each(podcastList,function(idx, item){
							var podcastURL = $(item).attr('value');
							
							if (url == podcastURL)
							{
								var podcastIndex = idx;
								var siteIndex = $(item).parent().attr('value');
								//console.log("Found URL match: " + podcastURL);
								//console.log("podcastIndex: " + podcastIndex);
								//console.log("podcast site Id: " + item.parentNode.id);
								//console.log("podcast site: " + siteIndex);
		
								arr = [siteIndex, podcastIndex];
								return false; //breaks the loop (currently in an inner function)
							}
							
						});

						if (arr)
						{
							return arr;
						}
					}
					return arr;
				}

				
				//setComboBoxesFromPodcastURL
				function setComboBoxesFromPodcastURL(url)
				{
					var comboBoxIndices = searchPodcastURLs(url);
					if (comboBoxIndices)
					{
						//console.log("combo box indices found: " + comboBoxIndices);
						
						//var siteIndex = comboBoxIndices.siteIndex;
						//var podcastIndex = comboBoxIndices.podcastIndex;
						var siteIndex = comboBoxIndices[0];
						var podcastIndex = comboBoxIndices[1];
						
						$("#PodcastSite").val(siteIndex).change();

						var podcastsComboBoxId = "#Site" + siteIndex + "Podcasts";
						$(podcastsComboBoxId).prop('selectedIndex', podcastIndex);
						//$("#" + podcastsComboBoxId)[0].selectedIndex = podcastIndex;
						
						$('#setUrl0').click();
						
						return true;
					}

					$("#PodcastSite").val(0).change();
					
					return false;
				}

				//jQuery('#searchPodcasts').click(function() {
				//	setComboBoxesFromPodcastURL("http://traffic.libsyn.com/force-cdn/highwinds/trainingforclimbing/t4c-podcast-2-x-factors.mp3");
				//	//setComboBoxesFromPodcastURL("https://media.blubrry.com/enormocast/p/enormocast.com/wp-content/uploads/podcasts/Enormo3Kelly1.mp3");
				//});


//import/export
				$('#exportToFileCheckBox').change(function() {
					if(this.checked) {
						$("#filenameToSaveAs").removeClass("disabledText");
						$("#inputFileNameToSaveAs").prop('disabled',false);
					}
					else{
						$("#filenameToSaveAs").addClass("disabledText");
						$("#inputFileNameToSaveAs").prop('disabled',true);
					}
				});
				
				
				function clearExportedURL()
				{
				console.log("clearing");
					document.getElementById("inputTinyURL").value = "";
				}
				
				jQuery('#savePoCaDataBtn').click(function() {

					$("#exportedURL").hide();
					//document.getElementById("exportPoCaDataToSaveBase64").value = "";
					document.getElementById("inputTinyURL").value = "";
					
					var fileNameToSaveAs;

					if ($("#exportToFileCheckBox").prop('checked')) {
						
						fileNameToSaveAs = document.getElementById("inputFileNameToSaveAs").value;
						
						if ($.trim(fileNameToSaveAs).length === 0)
						{
							alert("Please enter a valid filename");
							return;
						}
					}

					
					var themesArr = Array.from(themeMap.values());
					var tempPoCaMarks = [];

					for (i=0; i < themesArr.length; ++i)
					{
						tempPoCaMarks.push.apply(tempPoCaMarks, themesArr[i].PoCaMarks); //append array to tempPoCaMarks array
					}

					var PoCaDataObj = Object.create(PoCaData.prototype);
					PoCaDataObj.PoCaThemes = themesArr;
					PoCaDataObj.PoCaMarks = tempPoCaMarks;

					var textToSave = JSON.stringify(PoCaDataObj);
					
					console.log(textToSave);
					//generate lzma compressed PoCaMark data for URL query string
					//document.getElementById("exportPoCaDataToSaveBase64").value = btoa(textToSave); //base64 (uncompressed) load test
					try {
						const lib = JsonUrl("lzma");
						lib.compress(textToSave).then(output => {
							var newURL = window.location.protocol + "//" + window.location.host + window.location.pathname + "?data=" + output
							//document.getElementById("exportPoCaDataToSaveBase64").value = newURL;
							document.getElementById("inputTinyURL").value = newURL;
						});
					} catch (err) {
						//document.getElementById("exportPoCaDataToSaveBase64").value = `Unable to compress. Reason: ${err}`;
						document.getElementById("inputTinyURL").value = `Unable to compress. Reason: ${err}`;
					}
					
					$("#exportedURL").show();
					
					
					if ($("#exportToFileCheckBox").prop('checked') == false) {
						return;
					}
					
					var textToSaveAsBlob = new Blob([textToSave], {type:"text/plain"});
					var textToSaveAsURL = window.URL.createObjectURL(textToSaveAsBlob);
				 
					var downloadLink = document.createElement("a");
					downloadLink.download = fileNameToSaveAs;
					downloadLink.innerHTML = "Download File";
					downloadLink.href = textToSaveAsURL;
					downloadLink.onclick = DestroyClickedElement;
					downloadLink.style.display = "none";
					document.body.appendChild(downloadLink);
				 
					downloadLink.click();
				});

				function DestroyClickedElement(event)
				{
					document.body.removeChild(event.target);
				}
				
				
				function LoadPoCaData(textFromFileLoaded)
				{
					loadingFromPoCaFile = true;
					playerLoadedData = false;

					document.getElementById("inputPoCaDataToSave").value = textFromFileLoaded;

					
					var json2 = textFromFileLoaded;
					
					console.log(json2);
					var PoCaDataObj = PoCaData.FromJson(json2);

					resetTabsOnLoad();

					var PoCaThemes2 = PoCaDataObj.PoCaThemes;
					var PoCaMarks2 = PoCaDataObj.PoCaMarks;
					for (i=0; i < PoCaThemes2.length; ++i)
					{
						PoCaThemes2[i].PrintToLog();
						addTheme(PoCaThemes2[i]); // creates UI tab, theme context, empty playlist
					}

					var videoMediaType = false; //default to audio player
					if (PoCaMarks2.length > 0) {

						videoMediaType = ( stringStartsWith(PoCaMarks2[0].url, "https://www.youtube.") ||
										   stringStartsWith(PoCaMarks2[0].url, "http://www.youtube.")  ||
										   stringStartsWith(PoCaMarks2[0].url, "www.youtube.")
										 );
					}
						
					console.log("PoCaMarks file videoMediaType: " + videoMediaType);
					
					if (videoMediaType)
					{
						createVideoPlayer();
					}
					else
					{
						createAudioPlayer();
					}

					InitMediaPlayer(); //must be called before switchContextOnDeleteTab!!!
					$("#SelectMediaType").hide();
						
					//set first theme tab and it's playlist to active 
					playlistItemSelected = false;
					showingPoCaRangeButton = false;
					currentThemeID = "onload";
					switchContextOnDeleteTab("onload"); //must create and initialise media player before calling this!

					//console.log(json2);

//var poCaMarksComboBox = $("#PoCaMarksComboBox");
//poCaMarksComboBox.empty();
					playlistID = 0;

					for (i=0; i < PoCaMarks2.length; ++i)
					{
						//var playlist = $(".active-playlist");
						var playlist = $("#tabs-" + PoCaMarks2[i].themeId + " .playlist");
						var themePoCaMarks = themeMap.get(PoCaMarks2[i].themeId).PoCaMarks;
						var themePlaylistMap = themeMap.get(PoCaMarks2[i].themeId).playlistMap;
						
						PoCaMarks2[i].PrintToLog();
						themePoCaMarks.push(PoCaMarks2[i]);
//poCaMarksComboBox.append($("<option />").val(PoCaMarks.length)
//.html(PoCaMarks.length));
																
						playlistID++;
						themePlaylistMap.set(playlistID.toString(), PoCaMarks2[i]);
						var tA = convertFromSeconds(PoCaMarks2[i].start);
						var tB = convertFromSeconds(PoCaMarks2[i].stop);
						
						var onTheFly = PoCaMarks2[i].type == "PoCaRangeOTF";
						
						var newLi = $("<li class='" + (onTheFly ? "onTheFly" : "") + "' />").val(playlistID)
											.attr('itemId', themePoCaMarks.length -1)
											.html(tA + " - " + tB);
						if (onTheFly)
						{
							newLi.append($("<div class='PoCaRangeOTF' />")
											.html(("Finalize"))
										);
						}
						playlist.append(newLi);
					}
					
					if (PoCaMarks2.length > 0)
					{
						$("#playlistContainer").show();

						var foundUrl = false;

						if (videoMediaType)
						{
							$("#SelectPodcast").hide();
						}
						else
						{
							foundUrl = setComboBoxesFromPodcastURL(PoCaMarks2[0].url);
						}

						if (!foundUrl)
						{
							$("#urlInput")[0].value = PoCaMarks2[0].url;
							$('#setUrl').click();
							//setSourceUrl(PoCaMarks[0].url);
						}
					}

					currentPoCaMarkIndex = 0;
//$("#PoCaMarksComboBox").val(currentPoCaMarkIndex+1);
					$("#PoCaMode").val(2).change(); //set playback mode

					$('#contentFileOptions').slideToggle('fast');
					loadingFromPoCaFile = false;


				}
				
				var loadingFromPoCaFile = false;
				jQuery('#loadPoCaDataBtn').click(function() {
					var fileToLoad = document.getElementById("fileToLoad").files[0];
					var fileReader = new FileReader();
					fileReader.onload = function(fileLoadedEvent) 
					{
					//https://github.com/masotime/json-url
					//http://jsbin.com/cayuhox


						var textFromFileLoaded = fileLoadedEvent.target.result;

						LoadPoCaData(textFromFileLoaded);

					};
					fileReader.readAsText(fileToLoad, "UTF-8");
				});

				$('#expandAdvanced').click(function() {
					var c = '+';
					if ($("#expandAdvanced span").html()[0] == '+') c = '-';
					$("#expandAdvanced span").html(c);

					$('#contentAdvanced').slideToggle('fast');
				});

				$('#expandFileOptions').click(function() {
					var c = '+';
					if ($("#expandFileOptions span").html()[0] == '+') str = '-';
					$("#expandFileOptions span").html(c);

					$('#contentFileOptions').slideToggle('fast');
				});

//____________________________________________________________________________________________________
//____________________________________________________________________________________________________
				var mediaPlayer = null;
				function InitMediaPlayer() {
				

				
				$('#player').mediaelementplayer({
					alwaysShowControls: true,
					features: ['playpause','volume','loop','current','duration','progress'],
					alwaysShowHours: true,
					audioVolume: 'horizontal',
					audioWidth: 600,
					//audioHeight: 120,

					success: function(media, node, player) {
						mediaPlayer = media;
						
						InitControls(mediaPlayer);
						controls.setCallbackSetA(setA);
						controls.setCallbackSetB(setB);
						
						var sliderHandle = $( "#slider-handle" );

						$('#slider').slider({
							range: false,
							min: 0,
							max: 100,
							orientation: "horizontal",
							values: [0],
							create: function() {
								sliderHandle.text( convertFromSeconds( $( this ).slider( "value" ) ) );
							},

							slide: function(event, ui) {
								var timeInSeconds = ui.value;
								sliderHandle.text( convertFromSeconds(timeInSeconds) );
								
								media.setCurrentTime(timeInSeconds);

							}
						});


						//media.setCurrentTime(101); //initially start playing at specific time
						//media.play();

						jQuery('.bm3').click(function() {
							media.setCurrentTime($("#timeInput")[0].value);
							//media.play();
						});

						jQuery('.cbm').click(function() {
							var timeInSeconds = media.getCurrentTime();
							$("#timeOutput").val(timeInSeconds);
							$("#timeOutput2").val(convertFromSeconds(timeInSeconds));
						});


						var mcTimeThreshold = 300; //220-370
						var firstMCTime = 0;
						var lastMCTime = 0;
						var multiClickCount = 0;

						function createOnTheFlyPoCaRange(multiClickCount)
						{
							var endTime = firstMCTime;
							var startTime = endTime;
							
							switch (multiClickCount)
							{
								case 1: startTime -= 60;   break;
								case 2: startTime -= 60*2; break;
								case 3: startTime -= 60*3; break;
								case 4: startTime -= 60*4; break;
								case 5: startTime -= 60*5; break;
								default:startTime -= 60*6; break;
							}
							
							//clamp the start time!
							startTime =  (startTime < 0) ? 0 : startTime;


							controls.setTimes(startTime, endTime);
							
//							startTime = convertFromSeconds(startTime);
//							endTime = convertFromSeconds(endTime);
//							$("#timeA")[0].value = startTime;
//							$("#timeB")[0].value = endTime;

							document.getElementById("inputPoCaDelay").value = 0;
							document.getElementById("inputPoCaTitle").value = "";
							document.getElementById("inputPoCaNotes").value = "";

							var onTheFly = true;
							behaviour.CreatePoCaRange(media, onTheFly);
						}
												
						jQuery('#multi-click').click(function() {
						
							if (currentPoCaMode == 1) return; //shouldn't work in play mode
						
							++multiClickCount;
							lastMCTime = Date.now();
							
							if (multiClickCount == 1)
							{
								firstMCTime = media.getCurrentTime();
							}
						
							setTimeout(function () {
								
								var time2 = Date.now();

								if (time2 > lastMCTime + mcTimeThreshold)
								{
									console.log("multiClickCount: " + multiClickCount);
									createOnTheFlyPoCaRange(multiClickCount);

									lastMCTime = time2;
									multiClickCount = 0;
								}
							}, mcTimeThreshold + 50);

						});



						jQuery('#createPoCaMark').click(function() {
							behaviour.CreatePoCaMark(media);
						});

						jQuery('#createPoCaRange').click(function() {
						
								clearExportedURL();

							var onTheFly = false;
							behaviour.CreatePoCaRange(media, onTheFly);
						});

						jQuery("#PodcastSite").change(function () {
							//First hide all podcast lists
							var pcListElements = document.getElementsByClassName("SitePodcasts");
							for(var i=0; i<pcListElements.length; i++) {
								pcListElements[i].style.display = 'none';
							}

							//then show the selected site's podcast list
							var selectedSite = $("#PodcastSite").find('option:selected').index();
							if (selectedSite == 0)
							{
								document.getElementById("setUrl0").style.display = 'none';
							}
							else
							{
								document.getElementById("setUrl0").style.display = '';
							}
							
							console.log("selectedSite: " + selectedSite);
							var podcastsComboBoxId = "Site" + selectedSite + "Podcasts";

							$("#" + podcastsComboBoxId).prop('selectedIndex', 0);

							document.getElementById(podcastsComboBoxId).style.display = '';
						});
						
						
						//setUrl0
						jQuery('#setUrl0').click(function() {
							console.log("loadingFromPoCaFile: " + loadingFromPoCaFile);

							clearExportedURL();
							var selectedSite = $("#PodcastSite").find('option:selected').index();
							console.log("selectedSite: " + selectedSite);

							var mp3Url = document.getElementById("Site" + selectedSite + "Podcasts").value
							console.log("mp3Url: " + mp3Url);
							$("#urlInput")[0].value = mp3Url;

							media.setSrc(mp3Url);
							media.load();
						});

						//setUrl
						jQuery('#setUrl').click(function() {
							console.log("loadingFromPoCaFile: " + loadingFromPoCaFile);
							
							clearExportedURL();
							if (!loadingFromPoCaFile)
							{
								var foundUrl = setComboBoxesFromPodcastURL($("#urlInput")[0].value);	
								if (foundUrl)
									return;		
							}
							//IF loading from poca file Or
							//IF NOT loading form poca file AND url not found
							media.setSrc($("#urlInput")[0].value);
							media.load();
						});

						var lastNewInputPoCaDelay = "";
						var lastInputPoCaDelay = "";

						var lastNewInputPoCaTitle = "";
						var lastInputPoCaTitle = "";

						var lastNewInputPoCaNotes = "";
						var lastInputPoCaNotes = "";

						
						function playlistGainedFocus()
						{
						console.log("playlistGainedFocus");
							var timeAInSeconds = PoCaMarks[currentPoCaMarkIndex].start;
							var timeBInSeconds = PoCaMarks[currentPoCaMarkIndex].stop;
							controls.setTimes(timeAInSeconds, timeBInSeconds);

//							var timeAInHHMMSS = convertFromSeconds(PoCaMarks[currentPoCaMarkIndex].start);
//							var timeBInHHMMSS = convertFromSeconds(PoCaMarks[currentPoCaMarkIndex].stop);
//							document.getElementById("timeA").value = timeAInHHMMSS;
//							document.getElementById("timeB").value = timeBInHHMMSS;
							
							lastInputPoCaDelay = document.getElementById("inputPoCaDelay").value = PoCaMarks[currentPoCaMarkIndex].delay;
							lastInputPoCaTitle = document.getElementById("inputPoCaTitle").value = PoCaMarks[currentPoCaMarkIndex].title;
							lastInputPoCaNotes = document.getElementById("inputPoCaNotes").value = PoCaMarks[currentPoCaMarkIndex].notes;
						}

						function resumePlayBack(oldIndex)
						{
							pausedOnStopPoint = false;
							var startTime = 0;
							
							if (PoCaMarks.length > oldIndex) {
								var nthChildIndex = oldIndex;
								nthChildIndex++;

								console.log("nthChildIndex="+nthChildIndex);
								var nthChildStr = ":nth-child(" + nthChildIndex + ")";
								$('.active-playlist li' + nthChildStr).removeClass('currentlyPlaying');
								console.log("removing class, nstr="+nthChildStr);
							}
							
							if (PoCaMarks.length > currentPoCaMarkIndex) {
								startTime = PoCaMarks[currentPoCaMarkIndex].start;
//$("#PoCaMarksComboBox").val(currentPoCaMarkIndex+1);
								var nthChildIndex = currentPoCaMarkIndex;
								nthChildIndex++;

								console.log("nthChildIndex="+nthChildIndex);
								var nthChildStr = ":nth-child(" + nthChildIndex + ")";
								console.log("adding class, nstr="+nthChildStr);
								$('.active-playlist li' + nthChildStr).addClass('currentlyPlaying');

								scrollActivePlaylistToItem(nthChildStr);

								currentplaylistID = $('.active-playlist li' + nthChildStr).attr('value');
								console.log("currentplaylistID="+currentplaylistID);
								
								playlistGainedFocus();
							}
							
							$('#slider').slider('values', 0, startTime);
							sliderHandle.text( convertFromSeconds(startTime) );
							var start = Math.trunc(startTime);
							var end = Math.trunc(PoCaMarks[currentPoCaMarkIndex].stop);
							$("#slider").slider('option', {min: start, max: end});
							
							media.setCurrentTime(startTime);
							
							if (currentPoCaMode == 0) //if in edit mode
							{
								return;
							}
							media.play();
							//media.playbackRate = 1.5;

						} //resumePlayBack

						jQuery("#inputPoCaDelay").on('change keyup paste mouseup', function () {
						
							if (playlistItemSelected)
							{
								if ($(this).val() != lastInputPoCaDelay)
								{
									lastInputPoCaDelay = $(this).val();
									console.log('The delay text box really changed this time');
									PoCaMarks[currentPoCaMarkIndex].delay = $(this).val();
									
									var json2 = JSON.stringify(PoCaMarks);
									document.getElementById("inputPoCaDataToSave").value = json2;	
								}
							}
							else
							{
								if ($(this).val() != lastNewInputPoCaDelay)
								{
									lastNewInputPoCaDelay = newInputPoCaDelay = $(this).val();
									console.log('The delay text box really changed this time');
								}
							}
	
						});

						jQuery("#inputPoCaTitle").on('change keyup paste mouseup', function () {
						
							if (playlistItemSelected)
							{
								if ($(this).val() != lastInputPoCaTitle)
								{
									lastInputPoCaTitle = $(this).val();
									console.log('The title text box really changed this time');
									PoCaMarks[currentPoCaMarkIndex].title = $(this).val();
									
									var json2 = JSON.stringify(PoCaMarks);
									document.getElementById("inputPoCaDataToSave").value = json2;	
								}
							}
							else
							{
								if ($(this).val() != lastNewInputPoCaTitle)
								{
									lastNewInputPoCaTitle = newInputPoCaTitle = $(this).val();
									console.log('The title text box really changed this time');
								}
							}
	
						});

						jQuery("#inputPoCaNotes").on('change keyup paste mouseup', function () {
						
							if (playlistItemSelected)
							{
								if ($(this).val() != lastInputPoCaNotes)
								{
									lastInputPoCaNotes = $(this).val();
									console.log('The notes text box really changed this time');
									PoCaMarks[currentPoCaMarkIndex].notes = $(this).val();
									
									var json2 = JSON.stringify(PoCaMarks);
									document.getElementById("inputPoCaDataToSave").value = json2;	
								}
							}
							else
							{
								if ($(this).val() != lastNewInputPoCaNotes)
								{
									lastNewInputPoCaNotes = newInputPoCaNotes = $(this).val();
									console.log('The notes text box really changed this time');
								}
							}
	
						});

						function updatePlaylistItemTimeText()
						{
							var nthChildIndex = currentPoCaMarkIndex;
							nthChildIndex++;

							console.log("nthChildIndex="+nthChildIndex);
							var nthChildStr = ":nth-child(" + nthChildIndex + ")";
							console.log("updating playlist item time text, nstr="+nthChildStr);

							var tA = convertFromSeconds(PoCaMarks[currentPoCaMarkIndex].start);
							var tB = convertFromSeconds(PoCaMarks[currentPoCaMarkIndex].stop);
							$('.active-playlist li' + nthChildStr).html(tA + " - " + tB);
						}

						function setA(timeAInSeconds) {
							if (currentPoCaMode == 1) return; //shouldn't work in play mode

							if (playlistItemSelected)
							{
								//console.log("TimeA changed: " + timeAInSeconds);
								PoCaMarks[currentPoCaMarkIndex].start = timeAInSeconds;
								updatePlaylistItemTimeText();

								var json2 = JSON.stringify(PoCaMarks);
								document.getElementById("inputPoCaDataToSave").value = json2;	
							}
							else
							{
								newInputTimeA = convertFromSeconds(timeAInSeconds);
								console.log("TimeA changed: " + newInputTimeA);
							}

						}
						function setB(timeBInSeconds) {
							if (currentPoCaMode == 1) return; //shouldn't work in play mode

							if (playlistItemSelected)
							{
								//console.log("TimeB changed: " + timeBInSeconds);
								PoCaMarks[currentPoCaMarkIndex].stop = timeBInSeconds;
								updatePlaylistItemTimeText();

								var json2 = JSON.stringify(PoCaMarks);
								document.getElementById("inputPoCaDataToSave").value = json2;	
							}
							else
							{
								newInputTimeB = convertFromSeconds(timeBInSeconds);
								console.log("TimeB changed: " + newInputTimeB);
							}
						}

						var playerLoadedData = false;
						function hideTimeRail() {
							if (playerLoadedData) //when loading from url/file - we immediately switch to play mode before data is loaded. time bar still needs to be visible to adjust initial slider positions
							{
								$('.mejs__container .mejs__time-rail').css('display','none'); //prevent time changes via progress/seek bar while playing PoCa Marks
							}
						}

						function showTimeRail() {
							$('.mejs__container .mejs__time-rail').css('display','block'); //allow time changes via progress/seek bar in edit mode
						}
						
						jQuery("#PoCaMode").change(function () {
							if ($("#PoCaMode").find('option:selected').index() == 0) {  //edit mode
								currentPoCaMode = 0;
//$("#PoCaMarksComboBox").prop("disabled", true);
								media.pause();
								showTimeRail();
								
								$(".editcontrols").prop("readonly", false);
								
								$("#multi-click").show();
								$(".PoCaRangeOTF").show();

								$("#createButtonsDiv").show();

								//controls.restoreSliderTimes();
							}
							else {													//play mode
								//controls.backupSliderTimes();

								currentPoCaMode = 1;
								var oldIndex = currentPoCaMarkIndex;
								currentPoCaMarkIndex = 0;
								resumePlayBack(oldIndex);
//$("#PoCaMarksComboBox").prop("disabled", false);

//controls.refreshAllSlidersUI();
								hideTimeRail();
								
								$(".editcontrols").prop("readonly", true);
								$(".editcontrolslabel").hide();
								$("#multi-click").hide();
								$(".PoCaRangeOTF").hide();
								
								$("#createButtonsDiv").hide();
							}
						});
						
//jQuery("#PoCaMarksComboBox").change(function () {
//	var SelectedPoCaIndex = $("#PoCaMarksComboBox").find('option:selected').index();
//	currentPoCaMarkIndex = SelectedPoCaIndex;
//	resumePlayBack();
//});

//

						//$(".active-playlist").on("click", "li", function() { //JOT wtf is doing here!?
						$("#tabs").delegate( ".active-playlist li", "click", function() {

							//if (currentPoCaMode == 0) //if in edit mode
							//{
							//	return;
							//}
							var tempPlaylistMapID = $(this).attr('value');

							console.log("playlist item clicked  " + tempPlaylistMapID);

		//					var mark = playlistMap.get(tempPlaylistMapID); //should check with 'has' func first!!!

							var SelectedPoCaIndex = $(this).attr('itemId');
							var oldIndex = currentPoCaMarkIndex;
							currentPoCaMarkIndex = SelectedPoCaIndex;
							resumePlayBack(oldIndex);
						});	

						$("#tabs").delegate( ".active-playlist li div.PoCaRangeOTF", "click", function(e) {
							var li = $(this).parent();
							var OtfPoCaIndex = li.attr('itemId');
							PoCaMarks[OtfPoCaIndex].type = "PoCaRange";
							li.removeClass("onTheFly");

							$(this).remove();
							e.stopPropagation(); //stops the bubbling of an event to parent elements. (Prevents li selection)
						});	

						//clicking a tab header makes its playlist active
						tabs.delegate( ".ui-tabs-anchor", "click", function() {
							var tabPanelId = $(this).attr("href");
							console.log("tabPanelId: " + tabPanelId);
							var nextThemeId = $(tabPanelId).attr("themeId");
							console.log("currentThemeID: " + currentThemeID);
							console.log("nextThemeId: " + nextThemeId);
							if (nextThemeId == currentThemeID)
							{
								console.log("No need to switch theme context");
								return;
							}
							
							media.pause();
							
							var tempPlaylistItemSelected = playlistItemSelected;
							console.log("tempPlaylistItemSelected: " + tempPlaylistItemSelected);

							playlistItemLostFocus();
							
							if (currentThemeID != "onload")
							{
								var currentTheme = themeMap.get(currentThemeID.toString());
								currentTheme.currentplaylistID = currentplaylistID;
								currentTheme.currentPoCaMarkIndex = currentPoCaMarkIndex;
								currentTheme.playlistItemSelected = tempPlaylistItemSelected;
								currentTheme.showingPoCaRangeButton = showingPoCaRangeButton;
								currentTheme.playlistMap = playlistMap;
								currentTheme.PoCaMarks = PoCaMarks;
							}

							
							var nextTheme = themeMap.get(nextThemeId.toString());
							console.log("nextTheme: " + nextTheme);
							currentplaylistID = nextTheme.currentplaylistID;
							currentPoCaMarkIndex = nextTheme.currentPoCaMarkIndex;
							playlistItemSelected = nextTheme.playlistItemSelected;
							showingPoCaRangeButton = nextTheme.showingPoCaRangeButton;
							playlistMap = nextTheme.playlistMap;
							PoCaMarks = nextTheme.PoCaMarks;
							currentThemeID = nextThemeId;

							
							if (playlistItemSelected)
							{
								$(".editcontrolslabel").hide();
								$("#createPoCaRange").hide();
								
								playlistGainedFocus();
							}
							else
							{
								$(".editcontrolslabel").show();

								if (showingPoCaRangeButton)
								{
									$("#createPoCaRange").show();
								}
							}
							
							$("#tabs .active-playlist").removeClass("active-playlist");
							$(tabPanelId + " .playlist").addClass("active-playlist");
						});

						//jQuery(".active-playlist li").on("onfocus", function() {
						//	console.log("playlist lost focus");
						//});

						function playlistItemLostFocus()
						{
							playlistItemSelected = false;

							$(".editcontrolslabel").show();
							
//							if (showingPoCaRangeButton)
							{
								$("#createPoCaRange").show();
							}

							controls.setTimes(convertToSeconds(newInputTimeA), convertToSeconds(newInputTimeB));
							//document.getElementById("timeA").value = newInputTimeA;
							//document.getElementById("timeB").value = newInputTimeB;
							document.getElementById("inputPoCaDelay").value = newInputPoCaDelay;
							document.getElementById("inputPoCaTitle").value = newInputPoCaTitle;
							document.getElementById("inputPoCaNotes").value = newInputPoCaNotes;
						}
						
						window.addEventListener('mousedown', function(e){   
							if (document.getElementsByClassName('active-playlist')[0].contains(e.target)){
								//playlist clicked
								console.log("playlist clicked focus: ");

								playlistItemSelected = true;
								
								$(".editcontrolslabel").hide();
								$("#createPoCaRange").hide();
								
								playlistGainedFocus()
							}
							else{
								//clicked outside of playlist
							
								if (!( (currentPoCaMode == 1 && $(e.target).parents('.mejs__container').length ) || //clicking the player looses playlist focus only in edit mode
								     $(e.target).hasClass('editcontrols') || $(e.target).closest('.editcontrols').length ||
									 $(e.target).hasClass('ui-tabs-anchor') ))
								{
									console.log("playlist lost focus: " + e.srcElement);
									playlistItemLostFocus();
								}
								
							}
						});
  
						media.addEventListener('pause', function (e) {
							paused = true;
						});

						media.addEventListener('play', function (e) {
							paused = false;
						});

						media.addEventListener('seeking', function (e) {
							controls.onSeeking();
						});

						media.addEventListener('seeked', function (e) {
							controls.onSeeked();
						});
					
						var _lastTime = 0;
						media.addEventListener('playing', function (e) {
							interval = setInterval(function () {
								var currentTime = media.currentTime;

								if (!isNaN(currentTime) && currentTime > 0) {

									if (currentPoCaMode == 1) //play mode
									{
										if (pausedOnStopPoint)
										{
											
											var elapsed = (new Date() - pausedAtTime) / 1000;
											if (elapsed >= PoCaMarks[currentPoCaMarkIndex].delay) {
											
												var oldIndex = currentPoCaMarkIndex;
												currentPoCaMarkIndex++;

												//loop around PoCaMarks
												if (currentPoCaMarkIndex >= PoCaMarks.length) {
													currentPoCaMarkIndex = 0;
												}

												resumePlayBack(oldIndex);
											}
										}
										else { //playing
											
											if (PoCaMarks.length > currentPoCaMarkIndex)
											{
												var cueTime = PoCaMarks[currentPoCaMarkIndex].stop;
												if (cueTime >= _lastTime) {

													sliderHandle.text( convertFromSeconds(currentTime) );
													$('#slider').slider('values', 0, currentTime);
													
													if (cueTime <= currentTime) {
														media.pause();
														pausedAtTime = new Date();
														pausedOnStopPoint = true;
													}
												}
											}
										}
									}
									else if (currentPoCaMode == 0) //edit mode
									{
										if (!paused)
										{
											controls.onPlayTick(currentTime, _lastTime);									
										}
									}

									_lastTime = currentTime;
								}
							}, 50);

						}, false);

						media.addEventListener('loadeddata', function () {
							controls.loadedData();

							if (!loadingFromPoCaFile){
								$("#createButtonsDiv").show();

								playerLoadedData = true;
								if (currentPoCaMode == 1) {
									hideTimeRail();
								}
							}
						});

						controls.refreshAllSlidersUI();
						
					} //success: func...
				});
				}
				
				jQuery("#MediaType").change(function () {
					if ($("#MediaType").find('option:selected').index() == 1) {  //audio
						if (mediaPlayer != null) {
							mediaPlayer.pause();
							mediaPlayer.setSrc("");
							mediaPlayer.load();
							mediaPlayer.remove();
							mediaPlayer = null;
						}
						createAudioPlayer();
						InitMediaPlayer();
					}
					else {														 //video
						if (mediaPlayer != null) {
							mediaPlayer.pause();
							mediaPlayer.setSrc("");
							mediaPlayer.load();
							mediaPlayer.remove();
							mediaPlayer = null;
						}
						createVideoPlayer();
						InitMediaPlayer();
						
						$("#SelectPodcast").hide();
					}
					
					$("#SelectMediaType").hide();
					$("#loadOption").hide();

					initMainTabOnPageLoad();
				});

				//still in doc ready func
				//alert($("#urlInput")[0].value);
				//$('setUrl1').trigger('click');



				function PlaylistModified()
				{
					var liList = $(".active-playlist li");
					//console.log(liList.length);

					PoCaMarks.length = 0; //clear the vector
					
					$.each(liList,function(idx, item){
						var tempPlaylistMapID = $(item).attr('value');
						//console.log(tempPlaylistMapID);
						//console.log(playlistMap.has(tempPlaylistMapID));

						var mark = playlistMap.get(tempPlaylistMapID); //should check with 'has' func first!!!
						//console.log(mark);
						PoCaMarks.push(mark);
						
						var itemId = PoCaMarks.length -1;
						$(item).attr('itemId', itemId);
						
						if (tempPlaylistMapID == currentplaylistID)
						{
							currentPoCaMarkIndex = itemId;
							console.log("currentPoCaMarkIndex="+currentPoCaMarkIndex);
						}
					});
					
					var json2 = JSON.stringify(PoCaMarks);
					document.getElementById("inputPoCaDataToSave").value = json2;	
				}


					
				function setPlaylistDroppable(selector) {
				
					$(selector + " .playlist").sortable({ //won't work with .active-playlist

						connectWith: '#deleteArea',
						receieve: function(event, ui) {
							//Run this code whenever an item is dragged and dropped out of this list
						//	var order = $(this).sortable('serialize');
							//if(!ui.item.parent().hasClass("playlistDropArea"))
							//console.log(ui.item);
							//if (!$.contains($("#playlistDropArea")[0], ui.item))
							//console.log(ui.item.parents("div#playlistContainer"));
							console.log(event);
							
							console.log('currentPoCaMode='+currentPoCaMode);

							if (currentPoCaMode != 0) //if in play mode
							{
								console.log('not in edit mode: cancelling');
								$(this).sortable('cancel')
							}
							else
							{
								if (!ui.item.parents("div#playlistContainer").length)
								{
									console.log(ui.item);
									console.log('cancelling');
									//ui.sender.sortable("cancel");
									$(this).sortable('cancel')
								}
								else
								{
									console.log('sorting');
								}
							}
						},
						receive: function(event, ui) {
						},
						containment: "#playlistContainer",
						helper: 'clone'
					});
				
				
					$("#deleteArea").droppable({
						accept: '.active-playlist > li',
						activeClass: 'dropArea',
						hoverClass: 'dropAreaHover',
						drop: function(event, ui) {

							var tempPlaylistMapID = ui.draggable.val();
							playlistMap.delete(tempPlaylistMapID);

							ui.draggable.remove();
							
							var liList = document.getElementsByClassName('active-playlist')[0].getElementsByTagName("li");

							setTimeout(function () {
								$("#draggable").promise().done(function () {
								
									PlaylistModified();
									if (themeMap.size == 1 && liList.length == 0)
									{
										console.log("removed last PoCaMark from the only existing theme - hiding playlist container");

										$("#playlistContainer").hide();
									}
								});
							}, 100);
							
						}
					});

					$(selector + " .active-playlist").droppable(
					{
						accept: selector + ' .active-playlist > li',
	//					activeClass: 'dropArea',
	//					hoverClass: 'dropAreaHover',
						drop: function(event, ui) {
							
							console.log('2 currentPoCaMode='+currentPoCaMode);

							console.log('swapping');
							
							//var liList = document.getElementsByClassName('active-playlist')[0].getElementsByTagName("li");

							setTimeout(function () {
								$("#draggable").promise().done(function () {

									PlaylistModified();
									
								});
							}, 100);
							
						}
					});

				}
				setPlaylistDroppable("#tabs-1");
			
				
				//load PoCaMark data from lzma compressed URL query string - if it exists
				var url_string = window.location.href;
				var url = new URL(url_string);
				var urlData = url.searchParams.get("data");
				
				if (urlData != null && urlData != "")
				{
					//var textFromFileLoaded = atob(textToSave); //base64 (uncompressed) load test
					try {
						const lib = JsonUrl("lzma");
						lib.decompress(urlData).then(textFromFileLoaded => {
							LoadPoCaData(textFromFileLoaded);							
						})
					} catch (err) {
						console.log("Unable to decompress. Reason: ${err}");
					}
				}
				
			}); //ready
			

		</script>


	</body>
</html>
